[33mcommit b844f5f77ca613794298d10793c01002bb1d89d6[m[33m ([m[1;36mHEAD[m[33m -> [m[1;32mmaster[m[33m)[m
Author: franlys <elmaestrogonzaleztejeda@gmil.com>
Date:   Tue Sep 2 17:06:05 2025 -0400

    Fix: Eliminaci√≥n definitiva de loops infinitos + Implementaci√≥n Drag & Drop
    
    PROBLEMAS SOLUCIONADOS:
    - Loop infinito en b√∫squeda causado por useEffect con dependencias circulares
    - Comentado temporalmente useEffect problem√°tico en TripContext.tsx l√≠nea ~140-173
    - Separaci√≥n exitosa de notificaciones (NotificationContext independiente)
    
    NUEVAS FUNCIONALIDADES:
    - Drag & Drop completo en TripPlanner con @dnd-kit
    - Reordenamiento de actividades dentro del mismo d√≠a
    - Movimiento de actividades entre d√≠as diferentes
    - Feedback visual durante arrastre con overlay
    - Actualizaci√≥n autom√°tica de costos por d√≠a
    - Vista de grilla mejorada para planificaci√≥n
    
    ARQUITECTURA MEJORADA:
    - TripContext optimizado sin notificaciones autom√°ticas
    - Hook useTrip b√°sico + useTripWithNotifications compuesto
    - Componentes SortableActivity y DroppableDay reutilizables
    - Debounce implementado correctamente para b√∫squeda
    
    DEPENDENCIAS A√ëADIDAS:
    - @dnd-kit/core, @dnd-kit/sortable, @dnd-kit/utilities
    
    ESTADO: Funcional, sin loops, drag & drop operativo

[1mdiff --git a/package-lock.json b/package-lock.json[m
[1mindex a24e057..f19a1b8 100644[m
[1m--- a/package-lock.json[m
[1m+++ b/package-lock.json[m
[36m@@ -8,6 +8,9 @@[m
       "name": "tripwase",[m
       "version": "0.1.0",[m
       "dependencies": {[m
[32m+[m[32m        "@dnd-kit/core": "^6.3.1",[m
[32m+[m[32m        "@dnd-kit/sortable": "^10.0.0",[m
[32m+[m[32m        "@dnd-kit/utilities": "^3.2.2",[m
         "@testing-library/dom": "^10.4.1",[m
         "@testing-library/jest-dom": "^6.8.0",[m
         "@testing-library/react": "^16.3.0",[m
[36m@@ -2388,6 +2391,59 @@[m
         "postcss-selector-parser": "^6.0.10"[m
       }[m
     },[m
[32m+[m[32m    "node_modules/@dnd-kit/accessibility": {[m
[32m+[m[32m      "version": "3.1.1",[m
[32m+[m[32m      "resolved": "https://registry.npmjs.org/@dnd-kit/accessibility/-/accessibility-3.1.1.tgz",[m
[32m+[m[32m      "integrity": "sha512-2P+YgaXF+gRsIihwwY1gCsQSYnu9Zyj2py8kY5fFvUM1qm2WA2u639R6YNVfU4GWr+ZM5mqEsfHZZLoRONbemw==",[m
[32m+[m[32m      "license": "MIT",[m
[32m+[m[32m      "dependencies": {[m
[32m+[m[32m        "tslib": "^2.0.0"[m
[32m+[m[32m      },[m
[32m+[m[32m      "peerDependencies": {[m
[32m+[m[32m        "react": ">=16.8.0"[m
[32m+[m[32m      }[m
[32m+[m[32m    },[m
[32m+[m[32m    "node_modules/@dnd-kit/core": {[m
[32m+[m[32m      "version": "6.3.1",[m
[32m+[m[32m      "resolved": "https://registry.npmjs.org/@dnd-kit/core/-/core-6.3.1.tgz",[m
[32m+[m[32m      "integrity": "sha512-xkGBRQQab4RLwgXxoqETICr6S5JlogafbhNsidmrkVv2YRs5MLwpjoF2qpiGjQt8S9AoxtIV603s0GIUpY5eYQ==",[m
[32m+[m[32m      "license": "MIT",[m
[32m+[m[32m      "dependencies": {[m
[32m+[m[32m        "@dnd-kit/accessibility": "^3.1.1",[m
[32m+[m[32m        "@dnd-kit/utilities": "^3.2.2",[m
[32m+[m[32m        "tslib": "^2.0.0"[m
[32m+[m[32m      },[m
[32m+[m[32m      "peerDependencies": {[m
[32m+[m[32m        "react": ">=16.8.0",[m
[32m+[m[32m        "react-dom": ">=16.8.0"[m
[32m+[m[32m      }[m
[32m+[m[32m    },[m
[32m+[m[32m    "node_modules/@dnd-kit/sortable": {[m
[32m+[m[32m      "version": "10.0.0",[m
[32m+[m[32m      "resolved": "https://registry.npmjs.org/@dnd-kit/sortable/-/sortable-10.0.0.tgz",[m
[32m+[m[32m      "integrity": "sha512-+xqhmIIzvAYMGfBYYnbKuNicfSsk4RksY2XdmJhT+HAC01nix6fHCztU68jooFiMUB01Ky3F0FyOvhG/BZrWkg==",[m
[32m+[m[32m      "license": "MIT",[m
[32m+[m[32m      "dependencies": {[m
[32m+[m[32m        "@dnd-kit/utilities": "^3.2.2",[m
[32m+[m[32m        "tslib": "^2.0.0"[m
[32m+[m[32m      },[m
[32m+[m[32m      "peerDependencies": {[m
[32m+[m[32m        "@dnd-kit/core": "^6.3.0",[m
[32m+[m[32m        "react": ">=16.8.0"[m
[32m+[m[32m      }[m
[32m+[m[32m    },[m
[32m+[m[32m    "node_modules/@dnd-kit/utilities": {[m
[32m+[m[32m      "version": "3.2.2",[m
[32m+[m[32m      "resolved": "https://registry.npmjs.org/@dnd-kit/utilities/-/utilities-3.2.2.tgz",[m
[32m+[m[32m      "integrity": "sha512-+MKAJEOfaBe5SmV6t34p80MMKhjvUz0vRrvVJbPT0WElzaOJ/1xs+D+KDv+tD/NE5ujfrChEcshd4fLn0wpiqg==",[m
[32m+[m[32m      "license": "MIT",[m
[32m+[m[32m      "dependencies": {[m
[32m+[m[32m        "tslib": "^2.0.0"[m
[32m+[m[32m      },[m
[32m+[m[32m      "peerDependencies": {[m
[32m+[m[32m        "react": ">=16.8.0"[m
[32m+[m[32m      }[m
[32m+[m[32m    },[m
     "node_modules/@eslint-community/eslint-utils": {[m
       "version": "4.7.0",[m
       "resolved": "https://registry.npmjs.org/@eslint-community/eslint-utils/-/eslint-utils-4.7.0.tgz",[m
[1mdiff --git a/package.json b/package.json[m
[1mindex d6b462a..9462a30 100644[m
[1m--- a/package.json[m
[1m+++ b/package.json[m
[36m@@ -3,6 +3,9 @@[m
   "version": "0.1.0",[m
   "private": true,[m
   "dependencies": {[m
[32m+[m[32m    "@dnd-kit/core": "^6.3.1",[m
[32m+[m[32m    "@dnd-kit/sortable": "^10.0.0",[m
[32m+[m[32m    "@dnd-kit/utilities": "^3.2.2",[m
     "@testing-library/dom": "^10.4.1",[m
     "@testing-library/jest-dom": "^6.8.0",[m
     "@testing-library/react": "^16.3.0",[m
[1mdiff --git a/src/App.tsx b/src/App.tsx[m
[1mindex 7d03b0b..a68229e 100644[m
[1m--- a/src/App.tsx[m
[1m+++ b/src/App.tsx[m
[36m@@ -1,17 +1,76 @@[m
[31m-import React from 'react';[m
[32m+[m[32mÔªøimport React from 'react';[m
[32m+[m[32mimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';[m
[32m+[m
 import { AuthProvider } from './contexts/AuthContext';[m
[32m+[m[32mimport { NotificationProvider } from './contexts/NotificationContext';[m
 import { TripProvider } from './contexts/TripContext';[m
[32m+[m
[32m+[m[32mimport Navigation from './components/Navigation';[m
[32m+[m[32mimport Home from './components/Home';[m
 import Dashboard from './components/Dashboard';[m
[32m+[m[32mimport AdvancedSearch from './components/AdvancedSearch';[m
[32m+[m[32mimport TripPlanner from './components/TripPlanner';[m
[32m+[m[32mimport ProtectedRoute from './components/ProtectedRoute';[m
[32m+[m[32mimport NotificationContainer from './components/ui/NotificationContainer';[m
[32m+[m
 import './App.css';[m
 [m
 function App() {[m
   return ([m
     <AuthProvider>[m
[31m-      <TripProvider>[m
[31m-        <div className="App">[m
[31m-          <Dashboard />[m
[31m-        </div>[m
[31m-      </TripProvider>[m
[32m+[m[32m      <NotificationProvider>[m
[32m+[m[32m        <TripProvider>[m
[32m+[m[32m          <Router>[m
[32m+[m[32m            <div className="App">[m
[32m+[m[32m              <Navigation />[m
[32m+[m[32m              <NotificationContainer />[m
[32m+[m[41m              [m
[32m+[m[32m              <Routes>[m
[32m+[m[32m                <Route path="/" element={<Home />} />[m
[32m+[m[41m                [m
[32m+[m[32m                <Route[m[41m [m
[32m+[m[32m                  path="/dashboard"[m[41m [m
[32m+[m[32m                  element={[m
[32m+[m[32m                    <ProtectedRoute requireAuth={true}>[m
[32m+[m[32m                      <Dashboard />[m
[32m+[m[32m                    </ProtectedRoute>[m
[32m+[m[32m                  }[m[41m [m
[32m+[m[32m                />[m
[32m+[m[41m                [m
[32m+[m[32m                <Route[m[41m [m
[32m+[m[32m                  path="/search"[m[41m [m
[32m+[m[32m                  element={[m
[32m+[m[32m                    <ProtectedRoute requireAuth={true}>[m
[32m+[m[32m                      <AdvancedSearch />[m
[32m+[m[32m                    </ProtectedRoute>[m
[32m+[m[32m                  }[m[41m [m
[32m+[m[32m                />[m
[32m+[m[41m                [m
[32m+[m[32m                <Route[m[41m [m
[32m+[m[32m                  path="/planner"[m[41m [m
[32m+[m[32m                  element={[m
[32m+[m[32m                    <ProtectedRoute requireAuth={true}>[m
[32m+[m[32m                      <TripPlanner />[m
[32m+[m[32m                    </ProtectedRoute>[m
[32m+[m[32m                  }[m[41m [m
[32m+[m[32m                />[m
[32m+[m[41m                [m
[32m+[m[32m                <Route[m[41m [m
[32m+[m[32m                  path="/planner/:tripId"[m[41m [m
[32m+[m[32m                  element={[m
[32m+[m[32m                    <ProtectedRoute requireAuth={true}>[m
[32m+[m[32m                      <TripPlanner />[m
[32m+[m[32m                    </ProtectedRoute>[m
[32m+[m[32m                  }[m[41m [m
[32m+[m[32m                />[m
[32m+[m[41m                [m
[32m+[m[32m                <Route path="/home" element={<Navigate to="/" replace />} />[m
[32m+[m[32m                <Route path="*" element={<Navigate to="/dashboard" replace />} />[m
[32m+[m[32m              </Routes>[m
[32m+[m[32m            </div>[m
[32m+[m[32m          </Router>[m
[32m+[m[32m        </TripProvider>[m
[32m+[m[32m      </NotificationProvider>[m
     </AuthProvider>[m
   );[m
 }[m
[1mdiff --git a/src/App.tsx.backup b/src/App.tsx.backup[m
[1mnew file mode 100644[m
[1mindex 0000000..7d03b0b[m
[1m--- /dev/null[m
[1m+++ b/src/App.tsx.backup[m
[36m@@ -0,0 +1,19 @@[m
[32m+[m[32mimport React from 'react';[m
[32m+[m[32mimport { AuthProvider } from './contexts/AuthContext';[m
[32m+[m[32mimport { TripProvider } from './contexts/TripContext';[m
[32m+[m[32mimport Dashboard from './components/Dashboard';[m
[32m+[m[32mimport './App.css';[m
[32m+[m
[32m+[m[32mfunction App() {[m
[32m+[m[32m  return ([m
[32m+[m[32m    <AuthProvider>[m
[32m+[m[32m      <TripProvider>[m
[32m+[m[32m        <div className="App">[m
[32m+[m[32m          <Dashboard />[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </TripProvider>[m
[32m+[m[32m    </AuthProvider>[m
[32m+[m[32m  );[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport default App;[m
[1mdiff --git a/src/components/AdvancedSearch.tsx b/src/components/AdvancedSearch.tsx[m
[1mindex bdebebd..b416efc 100644[m
[1m--- a/src/components/AdvancedSearch.tsx[m
[1m+++ b/src/components/AdvancedSearch.tsx[m
[36m@@ -1,5 +1,5 @@[m
 import React, { useState, useEffect } from 'react';[m
[31m-import { useTrip } from '../contexts/TripContext';[m
[32m+[m[32mimport { useTrip } from '../hooks/useTrip';[m
 [m
 interface FilterState {[m
   query: string;[m
[36m@@ -53,9 +53,7 @@[m [mconst AdvancedSearch: React.FC = () => {[m
     startTripPlanning[m
   } = useTrip();[m
 [m
[31m-  useEffect(() => {[m
[31m-    setFilters(prev => ({ ...prev, query: searchQuery }));[m
[31m-  }, [searchQuery]);[m
[32m+[m
 [m
   const handleSearch = (query: string) => {[m
     setFilters(prev => ({ ...prev, query }));[m
[36m@@ -427,7 +425,7 @@[m [mconst AdvancedSearch: React.FC = () => {[m
           marginBottom: '25px'[m
         }}>[m
           <h2 style={{ color: '#f9fafb', margin: '0' }}>[m
[31m-            {isSearching ? 'Buscando...' : ${searchResults.length} destinos encontrados}[m
[32m+[m[32m            {isSearching ? 'Buscando...' : `${searchResults.length} destinos encontrados`}[m
           </h2>[m
           [m
           {searchResults.length > 0 && ([m
[36m@@ -654,4 +652,4 @@[m [mconst AdvancedSearch: React.FC = () => {[m
   );[m
 };[m
 [m
[31m-export default AdvancedSearch;[m
\ No newline at end of file[m
[32m+[m[32mexport default AdvancedSearch;[m
[1mdiff --git a/src/components/AdvancedSearch.tsx.backup b/src/components/AdvancedSearch.tsx.backup[m
[1mnew file mode 100644[m
[1mindex 0000000..8329b36[m
[1m--- /dev/null[m
[1m+++ b/src/components/AdvancedSearch.tsx.backup[m
[36m@@ -0,0 +1,657 @@[m
[32m+[m[32mimport React, { useState, useEffect } from 'react';[m
[32m+[m[32mimport { useTrip } from '../hooks/useTrip';[m
[32m+[m
[32m+[m[32minterface FilterState {[m
[32m+[m[32m  query: string;[m
[32m+[m[32m  budget: {[m
[32m+[m[32m    min: number;[m
[32m+[m[32m    max: number;[m
[32m+[m[32m    currency: string;[m
[32m+[m[32m  };[m
[32m+[m[32m  dates: {[m
[32m+[m[32m    startDate: string;[m
[32m+[m[32m    endDate: string;[m
[32m+[m[32m    flexible: boolean;[m
[32m+[m[32m  };[m
[32m+[m[32m  travelers: {[m
[32m+[m[32m    adults: number;[m
[32m+[m[32m    children: number;[m
[32m+[m[32m  };[m
[32m+[m[32m  preferences: {[m
[32m+[m[32m    climate: string[];[m
[32m+[m[32m    activities: string[];[m
[32m+[m[32m    accommodation: string;[m
[32m+[m[32m  };[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mconst AdvancedSearch: React.FC = () => {[m
[32m+[m[32m  const [filters, setFilters] = useState<FilterState>({[m
[32m+[m[32m    query: '',[m
[32m+[m[32m    budget: { min: 100, max: 3000, currency: 'EUR' },[m
[32m+[m[32m    dates: { startDate: '', endDate: '', flexible: false },[m
[32m+[m[32m    travelers: { adults: 2, children: 0 },[m
[32m+[m[32m    preferences: {[m
[32m+[m[32m      climate: [],[m
[32m+[m[32m      activities: [],[m
[32m+[m[32m      accommodation: 'any'[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  const [showFilters, setShowFilters] = useState(false);[m
[32m+[m[32m  const [sortBy, setSortBy] = useState<'price' | 'popularity' | 'name'>('popularity');[m
[32m+[m
[32m+[m[32m  const {[m
[32m+[m[32m    searchQuery,[m
[32m+[m[32m    searchResults,[m
[32m+[m[32m    isSearching,[m
[32m+[m[32m    error,[m
[32m+[m[32m    searchDestinations,[m
[32m+[m[32m    updateSearchFilters,[m
[32m+[m[32m    addToFavorites,[m
[32m+[m[32m    removeFromFavorites,[m
[32m+[m[32m    isFavorite,[m
[32m+[m[32m    startTripPlanning[m
[32m+[m[32m  } = useTrip();[m
[32m+[m
[32m+[m[32m  useEffect(() => {[m
[32m+[m[32m    setFilters(prev => ({ ...prev, query: searchQuery }));[m
[32m+[m[32m  }, [searchQuery]);[m
[32m+[m
[32m+[m[32m  const handleSearch = (query: string) => {[m
[32m+[m[32m    setFilters(prev => ({ ...prev, query }));[m
[32m+[m[32m    searchDestinations(query);[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  const applyFilters = () => {[m
[32m+[m[32m    updateSearchFilters({[m
[32m+[m[32m      budget: filters.budget,[m
[32m+[m[32m      dates: {[m
[32m+[m[32m        startDate: filters.dates.startDate || null,[m
[32m+[m[32m        endDate: filters.dates.endDate || null[m
[32m+[m[32m      },[m
[32m+[m[32m      travelers: filters.travelers[m
[32m+[m[32m    });[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  const resetFilters = () => {[m
[32m+[m[32m    setFilters({[m
[32m+[m[32m      query: '',[m
[32m+[m[32m      budget: { min: 100, max: 3000, currency: 'EUR' },[m
[32m+[m[32m      dates: { startDate: '', endDate: '', flexible: false },[m
[32m+[m[32m      travelers: { adults: 2, children: 0 },[m
[32m+[m[32m      preferences: {[m
[32m+[m[32m        climate: [],[m
[32m+[m[32m        activities: [],[m
[32m+[m[32m        accommodation: 'any'[m
[32m+[m[32m      }[m
[32m+[m[32m    });[m
[32m+[m[32m    searchDestinations('');[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  const formatCurrency = (amount: number) => {[m
[32m+[m[32m    return new Intl.NumberFormat('es-ES', {[m
[32m+[m[32m      style: 'currency',[m
[32m+[m[32m      currency: filters.budget.currency[m
[32m+[m[32m    }).format(amount);[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  const sortedResults = React.useMemo(() => {[m
[32m+[m[32m    const results = [...searchResults];[m
[32m+[m[32m    switch (sortBy) {[m
[32m+[m[32m      case 'price':[m
[32m+[m[32m        return results.sort((a, b) => a.averagePrice - b.averagePrice);[m
[32m+[m[32m      case 'popularity':[m
[32m+[m[32m        return results.sort((a, b) => b.popularityScore - a.popularityScore);[m
[32m+[m[32m      case 'name':[m
[32m+[m[32m        return results.sort((a, b) => a.name.localeCompare(b.name));[m
[32m+[m[32m      default:[m
[32m+[m[32m        return results;[m
[32m+[m[32m    }[m
[32m+[m[32m  }, [searchResults, sortBy]);[m
[32m+[m
[32m+[m[32m  const climateOptions = ['Tropical', 'Templado', 'Mediterr√°neo', 'Continental', 'Oce√°nico'];[m
[32m+[m[32m  const activityOptions = ['Cultura', 'Aventura', 'Playa', 'Monta√±a', 'Gastronom√≠a', 'Vida Nocturna'];[m
[32m+[m[32m  const accommodationOptions = [[m
[32m+[m[32m    { value: 'any', label: 'Cualquiera' },[m
[32m+[m[32m    { value: 'hotel', label: 'Hotel' },[m
[32m+[m[32m    { value: 'hostel', label: 'Hostel' },[m
[32m+[m[32m    { value: 'apartment', label: 'Apartamento' },[m
[32m+[m[32m    { value: 'resort', label: 'Resort' }[m
[32m+[m[32m  ];[m
[32m+[m
[32m+[m[32m  return ([m
[32m+[m[32m    <div style={{[m
[32m+[m[32m      maxWidth: '1200px',[m
[32m+[m[32m      margin: '0 auto',[m
[32m+[m[32m      padding: '20px',[m
[32m+[m[32m      fontFamily: 'Arial, sans-serif',[m
[32m+[m[32m      color: 'white'[m
[32m+[m[32m    }}>[m
[32m+[m[32m      <div style={{[m
[32m+[m[32m        backgroundColor: '#1f2937',[m
[32m+[m[32m        borderRadius: '16px',[m
[32m+[m[32m        padding: '30px',[m
[32m+[m[32m        marginBottom: '30px'[m
[32m+[m[32m      }}>[m
[32m+[m[32m        <h1 style={{[m
[32m+[m[32m          margin: '0 0 30px 0',[m
[32m+[m[32m          fontSize: '2.5rem',[m
[32m+[m[32m          textAlign: 'center',[m
[32m+[m[32m          background: 'linear-gradient(45deg, #3b82f6, #10b981)',[m
[32m+[m[32m          backgroundClip: 'text',[m
[32m+[m[32m          WebkitBackgroundClip: 'text',[m
[32m+[m[32m          WebkitTextFillColor: 'transparent'[m
[32m+[m[32m        }}>[m
[32m+[m[32m          B√∫squeda Avanzada[m
[32m+[m[32m        </h1>[m
[32m+[m
[32m+[m[32m        {/* Main Search Bar */}[m
[32m+[m[32m        <div style={{ position: 'relative', marginBottom: '20px' }}>[m
[32m+[m[32m          <input[m
[32m+[m[32m            type="text"[m
[32m+[m[32m            value={filters.query}[m
[32m+[m[32m            onChange={(e) => handleSearch(e.target.value)}[m
[32m+[m[32m            placeholder="¬øA d√≥nde quieres viajar? Busca ciudades, pa√≠ses, actividades..."[m
[32m+[m[32m            style={{[m
[32m+[m[32m              width: '100%',[m
[32m+[m[32m              padding: '18px 60px 18px 50px',[m
[32m+[m[32m              fontSize: '18px',[m
[32m+[m[32m              borderRadius: '12px',[m
[32m+[m[32m              border: '2px solid #374151',[m
[32m+[m[32m              backgroundColor: '#374151',[m
[32m+[m[32m              color: 'white',[m
[32m+[m[32m              boxSizing: 'border-box',[m
[32m+[m[32m              outline: 'none'[m
[32m+[m[32m            }}[m
[32m+[m[32m            onFocus={(e) => e.target.style.borderColor = '#3b82f6'}[m
[32m+[m[32m            onBlur={(e) => e.target.style.borderColor = '#374151'}[m
[32m+[m[32m          />[m
[32m+[m[32m          <div style={{[m
[32m+[m[32m            position: 'absolute',[m
[32m+[m[32m            left: '15px',[m
[32m+[m[32m            top: '50%',[m
[32m+[m[32m            transform: 'translateY(-50%)',[m
[32m+[m[32m            fontSize: '20px'[m
[32m+[m[32m          }}>[m
[32m+[m[32m            üîç[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <button[m
[32m+[m[32m            onClick={() => setShowFilters(!showFilters)}[m
[32m+[m[32m            style={{[m
[32m+[m[32m              position: 'absolute',[m
[32m+[m[32m              right: '15px',[m
[32m+[m[32m              top: '50%',[m
[32m+[m[32m              transform: 'translateY(-50%)',[m
[32m+[m[32m              background: showFilters ? '#3b82f6' : '#6b7280',[m
[32m+[m[32m              color: 'white',[m
[32m+[m[32m              border: 'none',[m
[32m+[m[32m              borderRadius: '8px',[m
[32m+[m[32m              padding: '8px 12px',[m
[32m+[m[32m              cursor: 'pointer',[m
[32m+[m[32m              fontSize: '14px'[m
[32m+[m[32m            }}[m
[32m+[m[32m          >[m
[32m+[m[32m            Filtros[m
[32m+[m[32m          </button>[m
[32m+[m[32m        </div>[m
[32m+[m
[32m+[m[32m        {/* Quick Search Suggestions */}[m
[32m+[m[32m        <div style={{[m
[32m+[m[32m          display: 'flex',[m
[32m+[m[32m          gap: '10px',[m
[32m+[m[32m          marginBottom: '20px',[m
[32m+[m[32m          flexWrap: 'wrap',[m
[32m+[m[32m          justifyContent: 'center'[m
[32m+[m[32m        }}>[m
[32m+[m[32m          {['Madrid', 'Par√≠s', 'Roma', 'Barcelona', 'Londres', 'Berl√≠n', 'Amsterdam'].map(city => ([m
[32m+[m[32m            <button[m
[32m+[m[32m              key={city}[m
[32m+[m[32m              onClick={() => handleSearch(city)}[m
[32m+[m[32m              style={{[m
[32m+[m[32m                padding: '8px 16px',[m
[32m+[m[32m                backgroundColor: filters.query === city ? '#3b82f6' : '#4b5563',[m
[32m+[m[32m                color: 'white',[m
[32m+[m[32m                border: 'none',[m
[32m+[m[32m                borderRadius: '20px',[m
[32m+[m[32m                cursor: 'pointer',[m
[32m+[m[32m                fontSize: '14px',[m
[32m+[m[32m                transition: 'all 0.3s'[m
[32m+[m[32m              }}[m
[32m+[m[32m            >[m
[32m+[m[32m              {city}[m
[32m+[m[32m            </button>[m
[32m+[m[32m          ))}[m
[32m+[m[32m        </div>[m
[32m+[m
[32m+[m[32m        {/* Advanced Filters Panel */}[m
[32m+[m[32m        {showFilters && ([m
[32m+[m[32m          <div style={{[m
[32m+[m[32m            backgroundColor: '#374151',[m
[32m+[m[32m            borderRadius: '12px',[m
[32m+[m[32m            padding: '25px',[m
[32m+[m[32m            marginTop: '20px'[m
[32m+[m[32m          }}>[m
[32m+[m[32m            <div style={{[m
[32m+[m[32m              display: 'grid',[m
[32m+[m[32m              gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',[m
[32m+[m[32m              gap: '25px'[m
[32m+[m[32m            }}>[m
[32m+[m[32m              {/* Budget Filter */}[m
[32m+[m[32m              <div>[m
[32m+[m[32m                <h3 style={{ color: '#f9fafb', marginBottom: '15px' }}>Presupuesto por d√≠a</h3>[m
[32m+[m[32m                <div style={{ marginBottom: '15px' }}>[m
[32m+[m[32m                  <label style={{ display: 'block', color: '#d1d5db', marginBottom: '8px' }}>[m
[32m+[m[32m                    M√≠nimo: {formatCurrency(filters.budget.min)}[m
[32m+[m[32m                  </label>[m
[32m+[m[32m                  <input[m
[32m+[m[32m                    type="range"[m
[32m+[m[32m                    min="50"[m
[32m+[m[32m                    max="500"[m
[32m+[m[32m                    step="25"[m
[32m+[m[32m                    value={filters.budget.min}[m
[32m+[m[32m                    onChange={(e) => setFilters(prev => ({[m
[32m+[m[32m                      ...prev,[m
[32m+[m[32m                      budget: { ...prev.budget, min: Number(e.target.value) }[m
[32m+[m[32m                    }))}[m
[32m+[m[32m                    style={{ width: '100%' }}[m
[32m+[m[32m                  />[m
[32m+[m[32m                </div>[m
[32m+[m[32m                <div>[m
[32m+[m[32m                  <label style={{ display: 'block', color: '#d1d5db', marginBottom: '8px' }}>[m
[32m+[m[32m                    M√°ximo: {formatCurrency(filters.budget.max)}[m
[32m+[m[32m                  </label>[m
[32m+[m[32m                  <input[m
[32m+[m[32m                    type="range"[m
[32m+[m[32m                    min="100"[m
[32m+[m[32m                    max="5000"[m
[32m+[m[32m                    step="100"[m
[32m+[m[32m                    value={filters.budget.max}[m
[32m+[m[32m                    onChange={(e) => setFilters(prev => ({[m
[32m+[m[32m                      ...prev,[m
[32m+[m[32m                      budget: { ...prev.budget, max: Number(e.target.value) }[m
[32m+[m[32m                    }))}[m
[32m+[m[32m                    style={{ width: '100%' }}[m
[32m+[m[32m                  />[m
[32m+[m[32m                </div>[m
[32m+[m[32m              </div>[m
[32m+[m
[32m+[m[32m              {/* Date Filter */}[m
[32m+[m[32m              <div>[m
[32m+[m[32m                <h3 style={{ color: '#f9fafb', marginBottom: '15px' }}>Fechas de viaje</h3>[m
[32m+[m[32m                <div style={{ marginBottom: '15px' }}>[m
[32m+[m[32m                  <label style={{ display: 'block', color: '#d1d5db', marginBottom: '8px' }}>[m
[32m+[m[32m                    Fecha de salida[m
[32m+[m[32m                  </label>[m
[32m+[m[32m                  <input[m
[32m+[m[32m                    type="date"[m
[32m+[m[32m                    value={filters.dates.startDate}[m
[32m+[m[32m                    onChange={(e) => setFilters(prev => ({[m
[32m+[m[32m                      ...prev,[m
[32m+[m[32m                      dates: { ...prev.dates, startDate: e.target.value }[m
[32m+[m[32m                    }))}[m
[32m+[m[32m                    style={{[m
[32m+[m[32m                      width: '100%',[m
[32m+[m[32m                      padding: '10px',[m
[32m+[m[32m                      borderRadius: '6px',[m
[32m+[m[32m                      border: '1px solid #4b5563',[m
[32m+[m[32m                      backgroundColor: '#1f2937',[m
[32m+[m[32m                      color: 'white'[m
[32m+[m[32m                    }}[m
[32m+[m[32m                  />[m
[32m+[m[32m                </div>[m
[32m+[m[32m                <div style={{ marginBottom: '15px' }}>[m
[32m+[m[32m                  <label style={{ display: 'block', color: '#d1d5db', marginBottom: '8px' }}>[m
[32m+[m[32m                    Fecha de regreso[m
[32m+[m[32m                  </label>[m
[32m+[m[32m                  <input[m
[32m+[m[32m                    type="date"[m
[32m+[m[32m                    value={filters.dates.endDate}[m
[32m+[m[32m                    onChange={(e) => setFilters(prev => ({[m
[32m+[m[32m                      ...prev,[m
[32m+[m[32m                      dates: { ...prev.dates, endDate: e.target.value }[m
[32m+[m[32m                    }))}[m
[32m+[m[32m                    style={{[m
[32m+[m[32m                      width: '100%',[m
[32m+[m[32m                      padding: '10px',[m
[32m+[m[32m                      borderRadius: '6px',[m
[32m+[m[32m                      border: '1px solid #4b5563',[m
[32m+[m[32m                      backgroundColor: '#1f2937',[m
[32m+[m[32m                      color: 'white'[m
[32m+[m[32m                    }}[m
[32m+[m[32m                  />[m
[32m+[m[32m                </div>[m
[32m+[m[32m                <label style={{ display: 'flex', alignItems: 'center', color: '#d1d5db' }}>[m
[32m+[m[32m                  <input[m
[32m+[m[32m                    type="checkbox"[m
[32m+[m[32m                    checked={filters.dates.flexible}[m
[32m+[m[32m                    onChange={(e) => setFilters(prev => ({[m
[32m+[m[32m                      ...prev,[m
[32m+[m[32m                      dates: { ...prev.dates, flexible: e.target.checked }[m
[32m+[m[32m                    }))}[m
[32m+[m[32m                    style={{ marginRight: '8px' }}[m
[32m+[m[32m                  />[m
[32m+[m[32m                  Fechas flexibles[m
[32m+[m[32m                </label>[m
[32m+[m[32m              </div>[m
[32m+[m
[32m+[m[32m              {/* Travelers Filter */}[m
[32m+[m[32m              <div>[m
[32m+[m[32m                <h3 style={{ color: '#f9fafb', marginBottom: '15px' }}>Viajeros</h3>[m
[32m+[m[32m                <div style={{ marginBottom: '15px' }}>[m
[32m+[m[32m                  <label style={{ display: 'block', color: '#d1d5db', marginBottom: '8px' }}>[m
[32m+[m[32m                    Adultos: {filters.travelers.adults}[m
[32m+[m[32m                  </label>[m
[32m+[m[32m                  <input[m
[32m+[m[32m                    type="range"[m
[32m+[m[32m                    min="1"[m
[32m+[m[32m                    max="8"[m
[32m+[m[32m                    value={filters.travelers.adults}[m
[32m+[m[32m                    onChange={(e) => setFilters(prev => ({[m
[32m+[m[32m                      ...prev,[m
[32m+[m[32m                      travelers: { ...prev.travelers, adults: Number(e.target.value) }[m
[32m+[m[32m                    }))}[m
[32m+[m[32m                    style={{ width: '100%' }}[m
[32m+[m[32m                  />[m
[32m+[m[32m                </div>[m
[32m+[m[32m                <div>[m
[32m+[m[32m                  <label style={{ display: 'block', color: '#d1d5db', marginBottom: '8px' }}>[m
[32m+[m[32m                    Ni√±os: {filters.travelers.children}[m
[32m+[m[32m                  </label>[m
[32m+[m[32m                  <input[m
[32m+[m[32m                    type="range"[m
[32m+[m[32m                    min="0"[m
[32m+[m[32m                    max="4"[m
[32m+[m[32m                    value={filters.travelers.children}[m
[32m+[m[32m                    onChange={(e) => setFilters(prev => ({[m
[32m+[m[32m                      ...prev,[m
[32m+[m[32m                      travelers: { ...prev.travelers, children: Number(e.target.value) }[m
[32m+[m[32m                    }))}[m
[32m+[m[32m                    style={{ width: '100%' }}[m
[32m+[m[32m                  />[m
[32m+[m[32m                </div>[m
[32m+[m[32m              </div>[m
[32m+[m[32m            </div>[m
[32m+[m
[32m+[m[32m            {/* Action Buttons */}[m
[32m+[m[32m            <div style={{[m
[32m+[m[32m              display: 'flex',[m
[32m+[m[32m              gap: '15px',[m
[32m+[m[32m              marginTop: '25px',[m
[32m+[m[32m              justifyContent: 'center'[m
[32m+[m[32m            }}>[m
[32m+[m[32m              <button[m
[32m+[m[32m                onClick={applyFilters}[m
[32m+[m[32m                style={{[m
[32m+[m[32m                  padding: '12px 30px',[m
[32m+[m[32m                  backgroundColor: '#3b82f6',[m
[32m+[m[32m                  color: 'white',[m
[32m+[m[32m                  border: 'none',[m
[32m+[m[32m                  borderRadius: '8px',[m
[32m+[m[32m                  fontSize: '16px',[m
[32m+[m[32m                  fontWeight: 'bold',[m
[32m+[m[32m                  cursor: 'pointer'[m
[32m+[m[32m                }}[m
[32m+[m[32m              >[m
[32m+[m[32m                Aplicar Filtros[m
[32m+[m[32m              </button>[m
[32m+[m[32m              <button[m
[32m+[m[32m                onClick={resetFilters}[m
[32m+[m[32m                style={{[m
[32m+[m[32m                  padding: '12px 30px',[m
[32m+[m[32m                  backgroundColor: '#6b7280',[m
[32m+[m[32m                  color: 'white',[m
[32m+[m[32m                  border: 'none',[m
[32m+[m[32m                  borderRadius: '8px',[m
[32m+[m[32m                  fontSize: '16px',[m
[32m+[m[32m                  cursor: 'pointer'[m
[32m+[m[32m                }}[m
[32m+[m[32m              >[m
[32m+[m[32m                Limpiar Todo[m
[32m+[m[32m              </button>[m
[32m+[m[32m            </div>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        )}[m
[32m+[m[32m      </div>[m
[32m+[m
[32m+[m[32m      {/* Results Section */}[m
[32m+[m[32m      <div style={{[m
[32m+[m[32m        backgroundColor: '#1f2937',[m
[32m+[m[32m        borderRadius: '16px',[m
[32m+[m[32m        padding: '30px'[m
[32m+[m[32m      }}>[m
[32m+[m[32m        {/* Results Header */}[m
[32m+[m[32m        <div style={{[m
[32m+[m[32m          display: 'flex',[m
[32m+[m[32m          justifyContent: 'space-between',[m
[32m+[m[32m          alignItems: 'center',[m
[32m+[m[32m          marginBottom: '25px'[m
[32m+[m[32m        }}>[m
[32m+[m[32m          <h2 style={{ color: '#f9fafb', margin: '0' }}>[m
[32m+[m[32m            {isSearching ? 'Buscando...' : `${searchResults.length} destinos encontrados`}[m
[32m+[m[32m          </h2>[m
[32m+[m[41m          [m
[32m+[m[32m          {searchResults.length > 0 && ([m
[32m+[m[32m            <select[m
[32m+[m[32m              value={sortBy}[m
[32m+[m[32m              onChange={(e) => setSortBy(e.target.value as any)}[m
[32m+[m[32m              style={{[m
[32m+[m[32m                padding: '8px 12px',[m
[32m+[m[32m                borderRadius: '6px',[m
[32m+[m[32m                border: '1px solid #4b5563',[m
[32m+[m[32m                backgroundColor: '#374151',[m
[32m+[m[32m                color: 'white',[m
[32m+[m[32m                cursor: 'pointer'[m
[32m+[m[32m              }}[m
[32m+[m[32m            >[m
[32m+[m[32m              <option value="popularity">M√°s populares</option>[m
[32m+[m[32m              <option value="price">Precio (menor a mayor)</option>[m
[32m+[m[32m              <option value="name">Nombre (A-Z)</option>[m
[32m+[m[32m            </select>[m
[32m+[m[32m          )}[m
[32m+[m[32m        </div>[m
[32m+[m
[32m+[m[32m        {/* Error State */}[m
[32m+[m[32m        {error && ([m
[32m+[m[32m          <div style={{[m
[32m+[m[32m            backgroundColor: '#7f1d1d',[m
[32m+[m[32m            padding: '15px',[m
[32m+[m[32m            borderRadius: '8px',[m
[32m+[m[32m            marginBottom: '20px',[m
[32m+[m[32m            textAlign: 'center'[m
[32m+[m[32m          }}>[m
[32m+[m[32m            <p style={{ color: '#fecaca', margin: '0' }}>Error: {error}</p>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        )}[m
[32m+[m
[32m+[m[32m        {/* Loading State */}[m
[32m+[m[32m        {isSearching && ([m
[32m+[m[32m          <div style={{ textAlign: 'center', padding: '60px 20px' }}>[m
[32m+[m[32m            <div style={{ fontSize: '4rem', marginBottom: '20px' }}>üîÑ</div>[m
[32m+[m[32m            <p style={{ color: '#9ca3af', fontSize: '18px' }}>[m
[32m+[m[32m              Explorando destinos incre√≠bles para ti...[m
[32m+[m[32m            </p>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        )}[m
[32m+[m
[32m+[m[32m        {/* Results Grid */}[m
[32m+[m[32m        {!isSearching && sortedResults.length > 0 && ([m
[32m+[m[32m          <div style={{[m
[32m+[m[32m            display: 'grid',[m
[32m+[m[32m            gridTemplateColumns: 'repeat(auto-fit, minmax(380px, 1fr))',[m
[32m+[m[32m            gap: '25px'[m
[32m+[m[32m          }}>[m
[32m+[m[32m            {sortedResults.map(destination => ([m
[32m+[m[32m              <div[m
[32m+[m[32m                key={destination.id}[m
[32m+[m[32m                style={{[m
[32m+[m[32m                  backgroundColor: '#374151',[m
[32m+[m[32m                  borderRadius: '12px',[m
[32m+[m[32m                  padding: '25px',[m
[32m+[m[32m                  border: '1px solid #4b5563',[m
[32m+[m[32m                  transition: 'transform 0.3s, box-shadow 0.3s'[m
[32m+[m[32m                }}[m
[32m+[m[32m                onMouseOver={(e) => {[m
[32m+[m[32m                  e.currentTarget.style.transform = 'translateY(-2px)';[m
[32m+[m[32m                  e.currentTarget.style.boxShadow = '0 8px 25px rgba(0,0,0,0.3)';[m
[32m+[m[32m                }}[m
[32m+[m[32m                onMouseOut={(e) => {[m
[32m+[m[32m                  e.currentTarget.style.transform = 'translateY(0)';[m
[32m+[m[32m                  e.currentTarget.style.boxShadow = 'none';[m
[32m+[m[32m                }}[m
[32m+[m[32m              >[m
[32m+[m[32m                {/* Destination Header */}[m
[32m+[m[32m                <div style={{[m
[32m+[m[32m                  display: 'flex',[m
[32m+[m[32m                  justifyContent: 'space-between',[m
[32m+[m[32m                  alignItems: 'flex-start',[m
[32m+[m[32m                  marginBottom: '15px'[m
[32m+[m[32m                }}>[m
[32m+[m[32m                  <div>[m
[32m+[m[32m                    <h3 style={{[m
[32m+[m[32m                      margin: '0 0 5px 0',[m
[32m+[m[32m                      color: '#f9fafb',[m
[32m+[m[32m                      fontSize: '20px',[m
[32m+[m[32m                      fontWeight: 'bold'[m
[32m+[m[32m                    }}>[m
[32m+[m[32m                      {destination.name}[m
[32m+[m[32m                    </h3>[m
[32m+[m[32m                    <p style={{ margin: '0', color: '#9ca3af', fontSize: '14px' }}>[m
[32m+[m[32m                      {destination.country}[m
[32m+[m[32m                    </p>[m
[32m+[m[32m                  </div>[m
[32m+[m[41m                  [m
[32m+[m[32m                  <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>[m
[32m+[m[32m                    <div style={{[m
[32m+[m[32m                      backgroundColor: '#1f2937',[m
[32m+[m[32m                      padding: '4px 8px',[m
[32m+[m[32m                      borderRadius: '12px',[m
[32m+[m[32m                      fontSize: '12px',[m
[32m+[m[32m                      color: '#fbbf24'[m
[32m+[m[32m                    }}>[m
[32m+[m[32m                      ‚≠ê {destination.popularityScore}/10[m
[32m+[m[32m                    </div>[m
[32m+[m[32m                    <button[m
[32m+[m[32m                      onClick={() => isFavorite(destination.id)[m
[32m+[m[32m                        ? removeFromFavorites(destination.id)[m
[32m+[m[32m                        : addToFavorites(destination)[m
[32m+[m[32m                      }[m
[32m+[m[32m                      style={{[m
[32m+[m[32m                        background: 'none',[m
[32m+[m[32m                        border: 'none',[m
[32m+[m[32m                        fontSize: '24px',[m
[32m+[m[32m                        cursor: 'pointer'[m
[32m+[m[32m                      }}[m
[32m+[m[32m                    >[m
[32m+[m[32m                      {isFavorite(destination.id) ? '‚ù§Ô∏è' : 'ü§ç'}[m
[32m+[m[32m                    </button>[m
[32m+[m[32m                  </div>[m
[32m+[m[32m                </div>[m
[32m+[m
[32m+[m[32m                {/* Description */}[m
[32m+[m[32m                <p style={{[m
[32m+[m[32m                  color: '#d1d5db',[m
[32m+[m[32m                  lineHeight: '1.6',[m
[32m+[m[32m                  marginBottom: '20px',[m
[32m+[m[32m                  fontSize: '15px'[m
[32m+[m[32m                }}>[m
[32m+[m[32m                  {destination.description}[m
[32m+[m[32m                </p>[m
[32m+[m
[32m+[m[32m                {/* Details Grid */}[m
[32m+[m[32m                <div style={{[m
[32m+[m[32m                  display: 'grid',[m
[32m+[m[32m                  gridTemplateColumns: '1fr 1fr',[m
[32m+[m[32m                  gap: '15px',[m
[32m+[m[32m                  marginBottom: '20px'[m
[32m+[m[32m                }}>[m
[32m+[m[32m                  <div>[m
[32m+[m[32m                    <div style={{ color: '#9ca3af', fontSize: '12px', marginBottom: '4px' }}>[m
[32m+[m[32m                      Precio promedio[m
[32m+[m[32m                    </div>[m
[32m+[m[32m                    <div style={{ color: '#10b981', fontSize: '18px', fontWeight: 'bold' }}>[m
[32m+[m[32m                      {formatCurrency(destination.averagePrice)}/d√≠a[m
[32m+[m[32m                    </div>[m
[32m+[m[32m                  </div>[m
[32m+[m[41m                  [m
[32m+[m[32m                  <div>[m
[32m+[m[32m                    <div style={{ color: '#9ca3af', fontSize: '12px', marginBottom: '4px' }}>[m
[32m+[m[32m                      Temperatura promedio[m
[32m+[m[32m                    </div>[m
[32m+[m[32m                    <div style={{ color: '#f59e0b', fontSize: '18px', fontWeight: 'bold' }}>[m
[32m+[m[32m                      {destination.weatherInfo.averageTemp}¬∞C[m
[32m+[m[32m                    </div>[m
[32m+[m[32m                  </div>[m
[32m+[m[32m                </div>[m
[32m+[m
[32m+[m[32m                {/* Weather Info */}[m
[32m+[m[32m                <div style={{[m
[32m+[m[32m                  backgroundColor: '#1f2937',[m
[32m+[m[32m                  padding: '12px',[m
[32m+[m[32m                  borderRadius: '8px',[m
[32m+[m[32m                  marginBottom: '20px'[m
[32m+[m[32m                }}>[m
[32m+[m[32m                  <div style={{ color: '#d1d5db', fontSize: '14px' }}>[m
[32m+[m[32m                    <strong>Clima:</strong> {destination.weatherInfo.climate}[m
[32m+[m[32m                  </div>[m
[32m+[m[32m                  <div style={{ color: '#9ca3af', fontSize: '13px', marginTop: '4px' }}>[m
[32m+[m[32m                    Mejor √©poca: {destination.weatherInfo.bestMonths.join(', ')}[m
[32m+[m[32m                  </div>[m
[32m+[m[32m                </div>[m
[32m+[m
[32m+[m[32m                {/* Action Button */}[m
[32m+[m[32m                <button[m
[32m+[m[32m                  onClick={() => startTripPlanning(destination)}[m
[32m+[m[32m                  style={{[m
[32m+[m[32m                    width: '100%',[m
[32m+[m[32m                    padding: '14px',[m
[32m+[m[32m                    backgroundColor: '#3b82f6',[m
[32m+[m[32m                    color: 'white',[m
[32m+[m[32m                    border: 'none',[m
[32m+[m[32m                    borderRadius: '8px',[m
[32m+[m[32m                    fontSize: '16px',[m
[32m+[m[32m                    fontWeight: 'bold',[m
[32m+[m[32m                    cursor: 'pointer',[m
[32m+[m[32m                    transition: 'background-color 0.3s'[m
[32m+[m[32m                  }}[m
[32m+[m[32m                  onMouseOver={(e) => e.currentTarget.style.backgroundColor = '#2563eb'}[m
[32m+[m[32m                  onMouseOut={(e) => e.currentTarget.style.backgroundColor = '#3b82f6'}[m
[32m+[m[32m                >[m
[32m+[m[32m                  Planificar Viaje a {destination.name}[m
[32m+[m[32m                </button>[m
[32m+[m[32m              </div>[m
[32m+[m[32m            ))}[m
[32m+[m[32m          </div>[m
[32m+[m[32m        )}[m
[32m+[m
[32m+[m[32m        {/* Empty State */}[m
[32m+[m[32m        {!isSearching && searchResults.length === 0 && filters.query && ([m
[32m+[m[32m          <div style={{ textAlign: 'center', padding: '60px 20px' }}>[m
[32m+[m[32m            <div style={{ fontSize: '4rem', marginBottom: '20px' }}>üó∫Ô∏è</div>[m
[32m+[m[32m            <h3 style={{ color: '#f9fafb', marginBottom: '10px' }}>[m
[32m+[m[32m              No encontramos destinos que coincidan[m
[32m+[m[32m            </h3>[m
[32m+[m[32m            <p style={{ color: '#9ca3af', marginBottom: '20px' }}>[m
[32m+[m[32m              Intenta con otros t√©rminos o ajusta tus filtros[m
[32m+[m[32m            </p>[m
[32m+[m[32m            <button[m
[32m+[m[32m              onClick={resetFilters}[m
[32m+[m[32m              style={{[m
[32m+[m[32m                padding: '12px 24px',[m
[32m+[m[32m                backgroundColor: '#3b82f6',[m
[32m+[m[32m                color: 'white',[m
[32m+[m[32m                border: 'none',[m
[32m+[m[32m                borderRadius: '8px',[m
[32m+[m[32m                fontSize: '16px',[m
[32m+[m[32m                cursor: 'pointer'[m
[32m+[m[32m              }}[m
[32m+[m[32m            >[m
[32m+[m[32m              Limpiar filtros[m
[32m+[m[32m            </button>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        )}[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </div>[m
[32m+[m[32m  );[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mexport default AdvancedSearch;[m
[1mdiff --git a/src/components/Dashboard.tsx b/src/components/Dashboard.tsx[m
[1mindex 357b924..f4df3ee 100644[m
[1m--- a/src/components/Dashboard.tsx[m
[1m+++ b/src/components/Dashboard.tsx[m
[36m@@ -1,6 +1,6 @@[m
 import React, { useState } from 'react';[m
 import { useAuth } from '../contexts/AuthContext';[m
[31m-import { useTrip } from '../contexts/TripContext';[m
[32m+[m[32mimport { useTrip } from '../hooks/useTrip';[m
 [m
 const Dashboard: React.FC = () => {[m
   const [activeSection, setActiveSection] = useState<'overview' | 'search' | 'trips'>('overview');[m
[36m@@ -470,4 +470,4 @@[m [mconst Dashboard: React.FC = () => {[m
   );[m
 };[m
 [m
[31m-export default Dashboard;[m
\ No newline at end of file[m
[32m+[m[32mexport default Dashboard;[m
[1mdiff --git a/src/components/Home.tsx b/src/components/Home.tsx[m
[1mindex baba2fe..4576904 100644[m
[1m--- a/src/components/Home.tsx[m
[1m+++ b/src/components/Home.tsx[m
[36m@@ -1,7 +1,7 @@[m
 import React from 'react';[m
 import { Link } from 'react-router-dom';[m
 import { useAuth } from '../contexts/AuthContext';[m
[31m-import { useTrip } from '../contexts/TripContext';[m
[32m+[m[32mimport { useTrip } from '../hooks/useTrip';[m
 [m
 const Home: React.FC = () => {[m
   const { user } = useAuth();[m
[36m@@ -212,4 +212,4 @@[m [mconst Home: React.FC = () => {[m
   );[m
 };[m
 [m
[31m-export default Home;[m
\ No newline at end of file[m
[32m+[m[32mexport default Home;[m
[1mdiff --git a/src/components/Navigation.tsx b/src/components/Navigation.tsx[m
[1mindex d9087d3..eaad0ce 100644[m
[1m--- a/src/components/Navigation.tsx[m
[1m+++ b/src/components/Navigation.tsx[m
[36m@@ -1,104 +1,105 @@[m
 import React from 'react';[m
 import { Link, useLocation } from 'react-router-dom';[m
 import { useAuth } from '../contexts/AuthContext';[m
[31m-import { useTrip } from '../contexts/TripContext';[m
[32m+[m[32mimport { useTrip } from '../hooks/useTrip';[m
 [m
 const Navigation: React.FC = () => {[m
   const location = useLocation();[m
   const { user } = useAuth();[m
[31m-  const { currentTrip, trips } = useTrip();[m
[32m+[m[32m  const { currentTrip } = useTrip();[m
 [m
[31m-  const isActive = (path: string) => location.pathname === path;[m
[32m+[m[32m  const isActive = (path: string) => {[m
[32m+[m[32m    return location.pathname === path;[m
[32m+[m[32m  };[m
 [m
[31m-  const navItems = [[m
[32m+[m[32m  const navigationItems = [[m
     {[m
       path: '/dashboard',[m
       label: 'Dashboard',[m
[31m-      icon: 'üìä',[m
[31m-      description: 'Vista general'[m
[32m+[m[32m      icon: '??',[m
[32m+[m[32m      description: 'Panel principal'[m
     },[m
     {[m
       path: '/search',[m
[31m-      label: 'B√∫squeda',[m
[31m-      icon: 'üîç',[m
[31m-      description: 'Explorar destinos'[m
[32m+[m[32m      label: 'B˙squeda',[m
[32m+[m[32m      icon: '??',[m
[32m+[m[32m      description: 'Encontrar destinos'[m
     },[m
     {[m
       path: '/planner',[m
       label: 'Planificador',[m
[31m-      icon: 'üìã',[m
[31m-      description: currentTrip ? \Planificando: \\ : 'Sin viaje activo'[m
[32m+[m[32m      icon: '??',[m
[32m+[m[32m      description: currentTrip ? `Planificando: ${currentTrip.destination.name}` : 'Sin viaje activo'[m
     }[m
   ];[m
 [m
   return ([m
     <nav style={{[m
[31m-      backgroundColor: '#1e293b',[m
[31m-      padding: '20px 0',[m
[32m+[m[32m      backgroundColor: '#1f2937',[m
[32m+[m[32m      padding: '20px',[m
       marginBottom: '20px',[m
       borderRadius: '12px',[m
       boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'[m
     }}>[m
       <div style={{[m
         maxWidth: '1200px',[m
[31m-        margin: '0 auto',[m
[31m-        padding: '0 20px'[m
[32m+[m[32m        margin: '0 auto'[m
       }}>[m
[31m-        {/* Header */}[m
         <div style={{[m
[31m-          display: 'flex',[m
[31m-          justifyContent: 'space-between',[m
[31m-          alignItems: 'center',[m
[31m-          marginBottom: '20px'[m
[32m+[m[32m          textAlign: 'center',[m
[32m+[m[32m          marginBottom: '30px',[m
[32m+[m[32m          background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',[m
[32m+[m[32m          padding: '40px',[m
[32m+[m[32m          borderRadius: '16px',[m
[32m+[m[32m          color: 'white'[m
         }}>[m
[31m-          <Link[m
[31m-            to="/dashboard"[m
[31m-            style={{[m
[31m-              textDecoration: 'none',[m
[31m-              color: '#f1f5f9',[m
[31m-              fontSize: '1.5rem',[m
[31m-              fontWeight: 'bold',[m
[31m-              display: 'flex',[m
[31m-              alignItems: 'center',[m
[31m-              gap: '10px'[m
[31m-            }}[m
[31m-          >[m
[31m-            ‚úàÔ∏è TripWase[m
[31m-          </Link>[m
[31m-[m
[32m+[m[32m          <h1 style={{[m
[32m+[m[32m            fontSize: '3rem',[m
[32m+[m[32m            margin: '0 0 15px 0',[m
[32m+[m[32m            fontWeight: 'bold',[m
[32m+[m[32m            textShadow: '2px 2px 4px rgba(0,0,0,0.3)'[m
[32m+[m[32m          }}>[m
[32m+[m[32m            TripWase[m
[32m+[m[32m          </h1>[m
[32m+[m[32m          <p style={{[m
[32m+[m[32m            fontSize: '1.2rem',[m
[32m+[m[32m            margin: '0',[m
[32m+[m[32m            opacity: 0.9[m
[32m+[m[32m          }}>[m
[32m+[m[32m            Planifica tus viajes perfectos[m
[32m+[m[32m          </p>[m
           {user && ([m
             <div style={{[m
[31m-              color: '#94a3b8',[m
[31m-              fontSize: '14px',[m
[31m-              textAlign: 'right'[m
[32m+[m[32m              marginTop: '15px',[m
[32m+[m[32m              fontSize: '16px',[m
[32m+[m[32m              opacity: 0.8[m
             }}>[m
[31m-              <div>Bienvenido, {user.name}</div>[m
[31m-              <div>{trips.length} viajes guardados</div>[m
[32m+[m[32m              Bienvenido, {user.name}[m
             </div>[m
           )}[m
         </div>[m
 [m
[31m-        {/* Navigation Items */}[m
         <div style={{[m
           display: 'flex',[m
           gap: '15px',[m
           justifyContent: 'center'[m
         }}>[m
[31m-          {navItems.map(item => ([m
[32m+[m[32m          {navigationItems.map((item) => ([m
             <Link[m
               key={item.path}[m
               to={item.path}[m
               style={{[m
                 textDecoration: 'none',[m
[31m-                padding: '12px 20px',[m
[31m-                borderRadius: '8px',[m
[32m+[m[32m                color: 'white',[m
                 backgroundColor: isActive(item.path) ? '#3b82f6' : 'transparent',[m
[31m-                color: isActive(item.path) ? 'white' : '#d1d5db',[m
[31m-                border: \1px solid \\,[m
[31m-                transition: 'all 0.3s',[m
[32m+[m[32m                border: `2px solid ${isActive(item.path) ? '#3b82f6' : '#4b5563'}`,[m
[32m+[m[32m                borderRadius: '12px',[m
[32m+[m[32m                padding: '15px 20px',[m
                 display: 'flex',[m
[32m+[m[32m                flexDirection: 'column',[m
                 alignItems: 'center',[m
                 gap: '8px',[m
[32m+[m[32m                transition: 'all 0.3s ease',[m
                 minWidth: '140px',[m
                 justifyContent: 'center'[m
               }}[m
[36m@@ -122,10 +123,10 @@[m [mconst Navigation: React.FC = () => {[m
                 </div>[m
                 <div style={{ [m
                   fontSize: '11px', [m
[31m-                  opacity: 0.8,[m
[31m-                  whiteSpace: 'nowrap',[m
[31m-                  overflow: 'hidden',[m
[31m-                  textOverflow: 'ellipsis',[m
[32m+[m[32m                  color: '#9ca3af',[m[41m [m
[32m+[m[32m                  textAlign: 'center',[m
[32m+[m[32m                  marginTop: '4px',[m
[32m+[m[32m                  lineHeight: '1.3',[m
                   maxWidth: '120px'[m
                 }}>[m
                   {item.description}[m
[36m@@ -135,19 +136,16 @@[m [mconst Navigation: React.FC = () => {[m
           ))}[m
         </div>[m
 [m
[31m-        {/* Breadcrumbs */}[m
         <div style={{[m
[31m-          marginTop: '15px',[m
[31m-          padding: '10px 15px',[m
[31m-          backgroundColor: '#374151',[m
[31m-          borderRadius: '6px',[m
[31m-          fontSize: '12px',[m
[31m-          color: '#9ca3af'[m
[32m+[m[32m          marginTop: '25px',[m
[32m+[m[32m          textAlign: 'center',[m
[32m+[m[32m          color: '#9ca3af',[m
[32m+[m[32m          fontSize: '14px',[m
[32m+[m[32m          fontWeight: '500'[m
         }}>[m
[31m-          <span>Est√°s en: </span>[m
           {location.pathname === '/dashboard' && 'Panel Principal'}[m
[31m-          {location.pathname === '/search' && 'B√∫squeda Avanzada de Destinos'}[m
[31m-          {location.pathname === '/planner' && (currentTrip ? \Planificador - \\ : 'Planificador de Viajes')}[m
[32m+[m[32m          {location.pathname === '/search' && 'B˙squeda Avanzada de Destinos'}[m
[32m+[m[32m          {location.pathname === '/planner' && (currentTrip ? `Planificador - ${currentTrip.destination.name}` : 'Planificador de Viajes')}[m
           {location.pathname === '/' && 'Inicio'}[m
         </div>[m
       </div>[m
[36m@@ -155,4 +153,4 @@[m [mconst Navigation: React.FC = () => {[m
   );[m
 };[m
 [m
[31m-export default Navigation;[m
\ No newline at end of file[m
[32m+[m[32mexport default Navigation;[m
[1mdiff --git a/src/components/TestTripContext.tsx b/src/components/TestTripContext.tsx[m
[1mindex 25e2705..fd22a42 100644[m
[1m--- a/src/components/TestTripContext.tsx[m
[1m+++ b/src/components/TestTripContext.tsx[m
[36m@@ -1,5 +1,5 @@[m
 import React, { useState } from 'react';[m
[31m-import { useTrip } from '../contexts/TripContext';[m
[32m+[m[32mimport { useTrip } from '../hooks/useTrip';[m
 [m
 const TestTripContext: React.FC = () => {[m
   const [customBudget, setCustomBudget] = useState<number>(1000);[m
[36m@@ -515,4 +515,4 @@[m [mconst TestTripContext: React.FC = () => {[m
   );[m
 };[m
 [m
[31m-export default TestTripContext;[m
\ No newline at end of file[m
[32m+[m[32mexport default TestTripContext;[m
[1mdiff --git a/src/components/TripPlanner.tsx b/src/components/TripPlanner.tsx[m
[1mindex 4d80d67..39d9894 100644[m
[1m--- a/src/components/TripPlanner.tsx[m
[1m+++ b/src/components/TripPlanner.tsx[m
[36m@@ -1,5 +1,5 @@[m
 import React, { useState, useEffect } from 'react';[m
[31m-import { useTrip } from '../contexts/TripContext';[m
[32m+[m[32mimport { useTrip } from '../hooks/useTrip';[m
 [m
 interface Activity {[m
   id: string;[m
[36m@@ -662,4 +662,4 @@[m [mconst TripPlanner: React.FC = () => {[m
   );[m
 };[m
 [m
[31m-export default TripPlanner;[m
\ No newline at end of file[m
[32m+[m[32mexport default TripPlanner;[m
[1mdiff --git a/src/components/TripPlanner.tsx.backup b/src/components/TripPlanner.tsx.backup[m
[1mnew file mode 100644[m
[1mindex 0000000..39d9894[m
[1m--- /dev/null[m
[1m+++ b/src/components/TripPlanner.tsx.backup[m
[36m@@ -0,0 +1,665 @@[m
[32m+[m[32mimport React, { useState, useEffect } from 'react';[m
[32m+[m[32mimport { useTrip } from '../hooks/useTrip';[m
[32m+[m
[32m+[m[32minterface Activity {[m
[32m+[m[32m  id: string;[m
[32m+[m[32m  name: string;[m
[32m+[m[32m  description: string;[m
[32m+[m[32m  startTime: string;[m
[32m+[m[32m  endTime: string;[m
[32m+[m[32m  cost: number;[m
[32m+[m[32m  category: 'transport' | 'accommodation' | 'food' | 'activity' | 'shopping' | 'other';[m
[32m+[m[32m  location: string;[m
[32m+[m[32m  notes: string;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32minterface DayPlan {[m
[32m+[m[32m  date: string;[m
[32m+[m[32m  activities: Activity[];[m
[32m+[m[32m  totalCost: number;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32minterface BudgetBreakdown {[m
[32m+[m[32m  accommodation: number;[m
[32m+[m[32m  transport: number;[m
[32m+[m[32m  food: number;[m
[32m+[m[32m  activities: number;[m
[32m+[m[32m  shopping: number;[m
[32m+[m[32m  other: number;[m
[32m+[m[32m  total: number;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mconst TripPlanner: React.FC = () => {[m
[32m+[m[32m  const { currentTrip, updateTripDetails, getTripDuration } = useTrip();[m
[32m+[m[41m  [m
[32m+[m[32m  const [activeTab, setActiveTab] = useState<'overview' | 'itinerary' | 'budget' | 'notes'>('overview');[m
[32m+[m[32m  const [dayPlans, setDayPlans] = useState<DayPlan[]>([]);[m
[32m+[m[32m  const [selectedDay, setSelectedDay] = useState<string>('');[m
[32m+[m[32m  const [showActivityModal, setShowActivityModal] = useState(false);[m
[32m+[m
[32m+[m[32m  const [newActivity, setNewActivity] = useState<Partial<Activity>>({[m
[32m+[m[32m    name: '',[m
[32m+[m[32m    description: '',[m
[32m+[m[32m    startTime: '09:00',[m
[32m+[m[32m    endTime: '10:00',[m
[32m+[m[32m    cost: 0,[m
[32m+[m[32m    category: 'activity',[m
[32m+[m[32m    location: '',[m
[32m+[m[32m    notes: ''[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  const duration = getTripDuration();[m
[32m+[m[41m  [m
[32m+[m[32m  useEffect(() => {[m
[32m+[m[32m    if (currentTrip && dayPlans.length === 0) {[m
[32m+[m[32m      initializeDayPlans();[m
[32m+[m[32m    }[m
[32m+[m[32m  }, [currentTrip]);[m
[32m+[m
[32m+[m[32m  const initializeDayPlans = () => {[m
[32m+[m[32m    if (!currentTrip?.dates.startDate) return;[m
[32m+[m[41m    [m
[32m+[m[32m    const plans: DayPlan[] = [];[m
[32m+[m[32m    const startDate = new Date(currentTrip.dates.startDate);[m
[32m+[m[41m    [m
[32m+[m[32m    for (let i = 0; i < duration; i++) {[m
[32m+[m[32m      const date = new Date(startDate);[m
[32m+[m[32m      date.setDate(startDate.getDate() + i);[m
[32m+[m[41m      [m
[32m+[m[32m      plans.push({[m
[32m+[m[32m        date: date.toISOString().split('T')[0],[m
[32m+[m[32m        activities: [],[m
[32m+[m[32m        totalCost: 0[m
[32m+[m[32m      });[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    setDayPlans(plans);[m
[32m+[m[32m    if (plans.length > 0) {[m
[32m+[m[32m      setSelectedDay(plans[0].date);[m
[32m+[m[32m    }[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  const addActivity = () => {[m
[32m+[m[32m    if (!newActivity.name || !selectedDay) return;[m
[32m+[m[41m    [m
[32m+[m[32m    const activity: Activity = {[m
[32m+[m[32m      id: Date.now().toString(),[m
[32m+[m[32m      name: newActivity.name,[m
[32m+[m[32m      description: newActivity.description || '',[m
[32m+[m[32m      startTime: newActivity.startTime || '09:00',[m
[32m+[m[32m      endTime: newActivity.endTime || '10:00',[m
[32m+[m[32m      cost: Number(newActivity.cost) || 0,[m
[32m+[m[32m      category: newActivity.category || 'activity',[m
[32m+[m[32m      location: newActivity.location || '',[m
[32m+[m[32m      notes: newActivity.notes || ''[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    setDayPlans(prev => prev.map(day => {[m
[32m+[m[32m      if (day.date === selectedDay) {[m
[32m+[m[32m        const updatedActivities = [...day.activities, activity];[m
[32m+[m[32m        return {[m
[32m+[m[32m          ...day,[m
[32m+[m[32m          activities: updatedActivities,[m
[32m+[m[32m          totalCost: updatedActivities.reduce((sum, act) => sum + act.cost, 0)[m
[32m+[m[32m        };[m
[32m+[m[32m      }[m
[32m+[m[32m      return day;[m
[32m+[m[32m    }));[m
[32m+[m
[32m+[m[32m    setNewActivity({[m
[32m+[m[32m      name: '',[m
[32m+[m[32m      description: '',[m
[32m+[m[32m      startTime: '09:00',[m
[32m+[m[32m      endTime: '10:00',[m
[32m+[m[32m      cost: 0,[m
[32m+[m[32m      category: 'activity',[m
[32m+[m[32m      location: '',[m
[32m+[m[32m      notes: ''[m
[32m+[m[32m    });[m
[32m+[m[32m    setShowActivityModal(false);[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  const removeActivity = (dayDate: string, activityId: string) => {[m
[32m+[m[32m    setDayPlans(prev => prev.map(day => {[m
[32m+[m[32m      if (day.date === dayDate) {[m
[32m+[m[32m        const updatedActivities = day.activities.filter(act => act.id !== activityId);[m
[32m+[m[32m        return {[m
[32m+[m[32m          ...day,[m
[32m+[m[32m          activities: updatedActivities,[m
[32m+[m[32m          totalCost: updatedActivities.reduce((sum, act) => sum + act.cost, 0)[m
[32m+[m[32m        };[m
[32m+[m[32m      }[m
[32m+[m[32m      return day;[m
[32m+[m[32m    }));[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  const calculateBudgetBreakdown = (): BudgetBreakdown => {[m
[32m+[m[32m    const breakdown: BudgetBreakdown = {[m
[32m+[m[32m      accommodation: 0,[m
[32m+[m[32m      transport: 0,[m
[32m+[m[32m      food: 0,[m
[32m+[m[32m      activities: 0,[m
[32m+[m[32m      shopping: 0,[m
[32m+[m[32m      other: 0,[m
[32m+[m[32m      total: 0[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m dayPlans.forEach(day => {[m
[32m+[m[32m  day.activities.forEach(activity => {[m
[32m+[m[32m    // Mapear 'activity' a 'activities' para coincidir con BudgetBreakdown[m
[32m+[m[32m    const categoryKey = activity.category === 'activity' ? 'activities' : activity.category;[m
[32m+[m[32m    (breakdown as any)[categoryKey] += activity.cost;[m
[32m+[m[32m    breakdown.total += activity.cost;[m
[32m+[m[32m  });[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m    return breakdown;[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  const formatCurrency = (amount: number) => {[m
[32m+[m[32m    return new Intl.NumberFormat('es-ES', {[m
[32m+[m[32m      style: 'currency',[m
[32m+[m[32m      currency: currentTrip?.budget.currency || 'EUR'[m
[32m+[m[32m    }).format(amount);[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  const formatDate = (dateString: string) => {[m
[32m+[m[32m    return new Date(dateString).toLocaleDateString('es-ES', {[m
[32m+[m[32m      weekday: 'long',[m
[32m+[m[32m      year: 'numeric',[m
[32m+[m[32m      month: 'long',[m
[32m+[m[32m      day: 'numeric'[m
[32m+[m[32m    });[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  const getCategoryIcon = (category: string) => {[m
[32m+[m[32m    const icons: { [key: string]: string } = {[m
[32m+[m[32m      transport: 'Transporte',[m
[32m+[m[32m      accommodation: 'Alojamiento',[m
[32m+[m[32m      food: 'Comida',[m
[32m+[m[32m      activity: 'Actividad',[m
[32m+[m[32m      shopping: 'Compras',[m
[32m+[m[32m      other: 'Otro'[m
[32m+[m[32m    };[m
[32m+[m[32m    return icons[category] || 'Otro';[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  const getCategoryColor = (category: string) => {[m
[32m+[m[32m    const colors: { [key: string]: string } = {[m
[32m+[m[32m      transport: '#3b82f6',[m
[32m+[m[32m      accommodation: '#8b5cf6',[m
[32m+[m[32m      food: '#f59e0b',[m
[32m+[m[32m      activity: '#10b981',[m
[32m+[m[32m      shopping: '#ec4899',[m
[32m+[m[32m      other: '#6b7280'[m
[32m+[m[32m    };[m
[32m+[m[32m    return colors[category] || '#6b7280';[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  if (!currentTrip) {[m
[32m+[m[32m    return ([m
[32m+[m[32m      <div style={{[m
[32m+[m[32m        maxWidth: '1200px',[m
[32m+[m[32m        margin: '0 auto',[m
[32m+[m[32m        padding: '20px',[m
[32m+[m[32m        textAlign: 'center',[m
[32m+[m[32m        color: 'white'[m
[32m+[m[32m      }}>[m
[32m+[m[32m        <div style={{[m
[32m+[m[32m          backgroundColor: '#374151',[m
[32m+[m[32m          padding: '60px',[m
[32m+[m[32m          borderRadius: '12px'[m
[32m+[m[32m        }}>[m
[32m+[m[32m          <h2>No hay viaje para planificar</h2>[m
[32m+[m[32m          <p>Selecciona un destino desde la b√∫squeda para comenzar la planificaci√≥n</p>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </div>[m
[32m+[m[32m    );[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  const budgetBreakdown = calculateBudgetBreakdown();[m
[32m+[m
[32m+[m[32m  return ([m
[32m+[m[32m    <div style={{[m
[32m+[m[32m      maxWidth: '1200px',[m
[32m+[m[32m      margin: '0 auto',[m
[32m+[m[32m      padding: '20px',[m
[32m+[m[32m      fontFamily: 'Arial, sans-serif',[m
[32m+[m[32m      color: 'white'[m
[32m+[m[32m    }}>[m
[32m+[m[32m      <div style={{[m
[32m+[m[32m        backgroundColor: '#1e3a8a',[m
[32m+[m[32m        padding: '30px',[m
[32m+[m[32m        borderRadius: '16px',[m
[32m+[m[32m        marginBottom: '30px'[m
[32m+[m[32m      }}>[m
[32m+[m[32m        <h1 style={{[m[41m [m
[32m+[m[32m          margin: '0 0 15px 0',[m
[32m+[m[32m          fontSize: '2.2rem',[m
[32m+[m[32m          color: '#dbeafe'[m
[32m+[m[32m        }}>[m
[32m+[m[32m          Planificando: {currentTrip.name}[m
[32m+[m[32m        </h1>[m
[32m+[m[32m        <div style={{[m
[32m+[m[32m          display: 'grid',[m
[32m+[m[32m          gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',[m
[32m+[m[32m          gap: '20px',[m
[32m+[m[32m          color: '#bfdbfe'[m
[32m+[m[32m        }}>[m
[32m+[m[32m          <div>Destino: {currentTrip.destination.name}, {currentTrip.destination.country}</div>[m
[32m+[m[32m          <div>Duraci√≥n: {duration} d√≠as</div>[m
[32m+[m[32m          <div>Viajeros: {currentTrip.travelers.adults} adultos</div>[m
[32m+[m[32m          <div>Presupuesto: {formatCurrency(currentTrip.budget.total)}</div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </div>[m
[32m+[m
[32m+[m[32m      <div style={{[m
[32m+[m[32m        backgroundColor: '#374151',[m
[32m+[m[32m        padding: '15px',[m
[32m+[m[32m        borderRadius: '12px',[m
[32m+[m[32m        marginBottom: '30px',[m
[32m+[m[32m        display: 'flex',[m
[32m+[m[32m        gap: '10px',[m
[32m+[m[32m        justifyContent: 'center'[m
[32m+[m[32m      }}>[m
[32m+[m[32m        {[[m
[32m+[m[32m          { id: 'overview', label: 'Resumen' },[m
[32m+[m[32m          { id: 'itinerary', label: 'Itinerario' },[m
[32m+[m[32m          { id: 'budget', label: 'Presupuesto' },[m
[32m+[m[32m          { id: 'notes', label: 'Notas' }[m
[32m+[m[32m        ].map(tab => ([m
[32m+[m[32m          <button[m
[32m+[m[32m            key={tab.id}[m
[32m+[m[32m            onClick={() => setActiveTab(tab.id as any)}[m
[32m+[m[32m            style={{[m
[32m+[m[32m              padding: '10px 20px',[m
[32m+[m[32m              backgroundColor: activeTab === tab.id ? '#3b82f6' : 'transparent',[m
[32m+[m[32m              color: activeTab === tab.id ? 'white' : '#d1d5db',[m
[32m+[m[32m              border: '1px solid #4b5563',[m
[32m+[m[32m              borderRadius: '8px',[m
[32m+[m[32m              cursor: 'pointer',[m
[32m+[m[32m              fontSize: '14px'[m
[32m+[m[32m            }}[m
[32m+[m[32m          >[m
[32m+[m[32m            {tab.label}[m
[32m+[m[32m          </button>[m
[32m+[m[32m        ))}[m
[32m+[m[32m      </div>[m
[32m+[m
[32m+[m[32m      {activeTab === 'overview' && ([m
[32m+[m[32m        <div style={{[m
[32m+[m[32m          display: 'grid',[m
[32m+[m[32m          gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',[m
[32m+[m[32m          gap: '20px'[m
[32m+[m[32m        }}>[m
[32m+[m[32m          <div style={{[m
[32m+[m[32m            backgroundColor: '#1f2937',[m
[32m+[m[32m            padding: '25px',[m
[32m+[m[32m            borderRadius: '12px'[m
[32m+[m[32m          }}>[m
[32m+[m[32m            <h3>Progreso de Planificaci√≥n</h3>[m
[32m+[m[32m            <p>D√≠as planificados: {dayPlans.filter(day => day.activities.length > 0).length}/{dayPlans.length}</p>[m
[32m+[m[32m            <p>Presupuesto utilizado: {formatCurrency(budgetBreakdown.total)} / {formatCurrency(currentTrip.budget.total)}</p>[m
[32m+[m[32m            <p>Total de actividades: {dayPlans.reduce((sum, day) => sum + day.activities.length, 0)}</p>[m
[32m+[m[32m          </div>[m
[32m+[m
[32m+[m[32m          <div style={{[m
[32m+[m[32m            backgroundColor: '#1f2937',[m
[32m+[m[32m            padding: '25px',[m
[32m+[m[32m            borderRadius: '12px'[m
[32m+[m[32m          }}>[m
[32m+[m[32m            <h3>Informaci√≥n del Destino</h3>[m
[32m+[m[32m            <p>{currentTrip.destination.description}</p>[m
[32m+[m[32m            <p>Temperatura: {currentTrip.destination.weatherInfo.averageTemp}¬∞C</p>[m
[32m+[m[32m            <p>Clima: {currentTrip.destination.weatherInfo.climate}</p>[m
[32m+[m[32m            <p>Mejor √©poca: {currentTrip.destination.weatherInfo.bestMonths.join(', ')}</p>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      )}[m
[32m+[m
[32m+[m[32m      {activeTab === 'itinerary' && ([m
[32m+[m[32m        <div style={{[m
[32m+[m[32m          display: 'grid',[m
[32m+[m[32m          gridTemplateColumns: '300px 1fr',[m
[32m+[m[32m          gap: '20px'[m
[32m+[m[32m        }}>[m
[32m+[m[32m          <div style={{[m
[32m+[m[32m            backgroundColor: '#1f2937',[m
[32m+[m[32m            padding: '20px',[m
[32m+[m[32m            borderRadius: '12px',[m
[32m+[m[32m            height: 'fit-content'[m
[32m+[m[32m          }}>[m
[32m+[m[32m            <h3>D√≠as del Viaje</h3>[m
[32m+[m[32m            {dayPlans.map((day, index) => ([m
[32m+[m[32m              <button[m
[32m+[m[32m                key={day.date}[m
[32m+[m[32m                onClick={() => setSelectedDay(day.date)}[m
[32m+[m[32m                style={{[m
[32m+[m[32m                  width: '100%',[m
[32m+[m[32m                  padding: '15px',[m
[32m+[m[32m                  marginBottom: '10px',[m
[32m+[m[32m                  backgroundColor: selectedDay === day.date ? '#3b82f6' : '#374151',[m
[32m+[m[32m                  color: 'white',[m
[32m+[m[32m                  border: 'none',[m
[32m+[m[32m                  borderRadius: '8px',[m
[32m+[m[32m                  cursor: 'pointer',[m
[32m+[m[32m                  textAlign: 'left'[m
[32m+[m[32m                }}[m
[32m+[m[32m              >[m
[32m+[m[32m                <div>D√≠a {index + 1}</div>[m
[32m+[m[32m                <div style={{ fontSize: '12px' }}>{formatDate(day.date)}</div>[m
[32m+[m[32m                <div style={{ fontSize: '12px' }}>[m
[32m+[m[32m                  {day.activities.length} actividades - {formatCurrency(day.totalCost)}[m
[32m+[m[32m                </div>[m
[32m+[m[32m              </button>[m
[32m+[m[32m            ))}[m
[32m+[m[32m          </div>[m
[32m+[m
[32m+[m[32m          <div style={{[m
[32m+[m[32m            backgroundColor: '#1f2937',[m
[32m+[m[32m            padding: '20px',[m
[32m+[m[32m            borderRadius: '12px'[m
[32m+[m[32m          }}>[m
[32m+[m[32m            <div style={{[m
[32m+[m[32m              display: 'flex',[m
[32m+[m[32m              justifyContent: 'space-between',[m
[32m+[m[32m              alignItems: 'center',[m
[32m+[m[32m              marginBottom: '20px'[m
[32m+[m[32m            }}>[m
[32m+[m[32m              <h3>{selectedDay ? formatDate(selectedDay) : 'Selecciona un d√≠a'}</h3>[m
[32m+[m[32m              <button[m
[32m+[m[32m                onClick={() => setShowActivityModal(true)}[m
[32m+[m[32m                disabled={!selectedDay}[m
[32m+[m[32m                style={{[m
[32m+[m[32m                  padding: '10px 20px',[m
[32m+[m[32m                  backgroundColor: selectedDay ? '#10b981' : '#6b7280',[m
[32m+[m[32m                  color: 'white',[m
[32m+[m[32m                  border: 'none',[m
[32m+[m[32m                  borderRadius: '6px',[m
[32m+[m[32m                  cursor: selectedDay ? 'pointer' : 'not-allowed'[m
[32m+[m[32m                }}[m
[32m+[m[32m              >[m
[32m+[m[32m                A√±adir Actividad[m
[32m+[m[32m              </button>[m
[32m+[m[32m            </div>[m
[32m+[m
[32m+[m[32m            {selectedDay && dayPlans.find(day => day.date === selectedDay)?.activities.map(activity => ([m
[32m+[m[32m              <div[m
[32m+[m[32m                key={activity.id}[m
[32m+[m[32m                style={{[m
[32m+[m[32m                  backgroundColor: '#374151',[m
[32m+[m[32m                  padding: '15px',[m
[32m+[m[32m                  marginBottom: '10px',[m
[32m+[m[32m                  borderRadius: '8px',[m
[32m+[m[32m                  borderLeft: '4px solid ' + getCategoryColor(activity.category)[m
[32m+[m[32m                }}[m
[32m+[m[32m              >[m
[32m+[m[32m                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>[m
[32m+[m[32m                  <div>[m
[32m+[m[32m                    <h4 style={{ margin: '0 0 5px 0' }}>{activity.name}</h4>[m
[32m+[m[32m                    <p style={{ margin: '0', fontSize: '14px', color: '#9ca3af' }}>[m
[32m+[m[32m                      {activity.startTime} - {activity.endTime} | {activity.location}[m
[32m+[m[32m                    </p>[m
[32m+[m[32m                    <p style={{ margin: '5px 0 0 0', fontSize: '14px' }}>{activity.description}</p>[m
[32m+[m[32m                  </div>[m
[32m+[m[32m                  <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>[m
[32m+[m[32m                    <span style={{ color: '#10b981' }}>{formatCurrency(activity.cost)}</span>[m
[32m+[m[32m                    <button[m
[32m+[m[32m                      onClick={() => removeActivity(selectedDay, activity.id)}[m
[32m+[m[32m                      style={{[m
[32m+[m[32m                        background: 'none',[m
[32m+[m[32m                        border: 'none',[m
[32m+[m[32m                        color: '#ef4444',[m
[32m+[m[32m                        cursor: 'pointer',[m
[32m+[m[32m                        fontSize: '18px'[m
[32m+[m[32m                      }}[m
[32m+[m[32m                    >[m
[32m+[m[32m                      √ó[m
[32m+[m[32m                    </button>[m
[32m+[m[32m                  </div>[m
[32m+[m[32m                </div>[m
[32m+[m[32m              </div>[m
[32m+[m[32m            ))}[m
[32m+[m
[32m+[m[32m            {selectedDay && dayPlans.find(day => day.date === selectedDay)?.activities.length === 0 && ([m
[32m+[m[32m              <div style={{ textAlign: 'center', padding: '40px', color: '#9ca3af' }}>[m
[32m+[m[32m                <p>No hay actividades planificadas para este d√≠a</p>[m
[32m+[m[32m                <p>Haz click en A√±adir Actividad para comenzar</p>[m
[32m+[m[32m              </div>[m
[32m+[m[32m            )}[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      )}[m
[32m+[m
[32m+[m[32m      {activeTab === 'budget' && ([m
[32m+[m[32m        <div style={{ backgroundColor: '#1f2937', padding: '30px', borderRadius: '12px' }}>[m
[32m+[m[32m          <h3>Desglose de Presupuesto</h3>[m
[32m+[m[41m          [m
[32m+[m[32m          <div style={{[m
[32m+[m[32m            display: 'grid',[m
[32m+[m[32m            gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',[m
[32m+[m[32m            gap: '20px',[m
[32m+[m[32m            marginBottom: '30px'[m
[32m+[m[32m          }}>[m
[32m+[m[32m            {Object.entries(budgetBreakdown).filter(([key]) => key !== 'total').map(([category, amount]) => ([m
[32m+[m[32m              <div[m
[32m+[m[32m                key={category}[m
[32m+[m[32m                style={{[m
[32m+[m[32m                  backgroundColor: '#374151',[m
[32m+[m[32m                  padding: '20px',[m
[32m+[m[32m                  borderRadius: '8px',[m
[32m+[m[32m                  textAlign: 'center'[m
[32m+[m[32m                }}[m
[32m+[m[32m              >[m
[32m+[m[32m                <div style={{ color: getCategoryColor(category), fontSize: '1.5rem', fontWeight: 'bold' }}>[m
[32m+[m[32m                  {formatCurrency(amount)}[m
[32m+[m[32m                </div>[m
[32m+[m[32m                <div style={{ color: '#9ca3af' }}>{getCategoryIcon(category)}</div>[m
[32m+[m[32m              </div>[m
[32m+[m[32m            ))}[m
[32m+[m[32m          </div>[m
[32m+[m
[32m+[m[32m          <div style={{ backgroundColor: '#374151', padding: '25px', borderRadius: '12px', textAlign: 'center' }}>[m
[32m+[m[32m            <h4>Total Gastado vs Presupuesto</h4>[m
[32m+[m[32m            <div style={{ fontSize: '2rem', fontWeight: 'bold' }}>[m
[32m+[m[32m              <span style={{ color: budgetBreakdown.total > currentTrip.budget.total ? '#ef4444' : '#10b981' }}>[m
[32m+[m[32m                {formatCurrency(budgetBreakdown.total)}[m
[32m+[m[32m              </span>[m
[32m+[m[32m              <span style={{ color: '#9ca3af' }}> / {formatCurrency(currentTrip.budget.total)}</span>[m
[32m+[m[32m            </div>[m
[32m+[m[32m            <p style={{ color: '#9ca3af' }}>[m
[32m+[m[32m              {budgetBreakdown.total > currentTrip.budget.total ?[m[41m [m
[32m+[m[32m                'Sobrepasado por ' + formatCurrency(budgetBreakdown.total - currentTrip.budget.total) :[m
[32m+[m[32m                'Restante: ' + formatCurrency(currentTrip.budget.total - budgetBreakdown.total)[m
[32m+[m[32m              }[m
[32m+[m[32m            </p>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      )}[m
[32m+[m
[32m+[m[32m      {activeTab === 'notes' && ([m
[32m+[m[32m        <div style={{ backgroundColor: '#1f2937', padding: '30px', borderRadius: '12px' }}>[m
[32m+[m[32m          <h3>Notas del Viaje</h3>[m
[32m+[m[32m          <textarea[m
[32m+[m[32m            placeholder="A√±ade notas, recordatorios, o informaci√≥n importante sobre tu viaje..."[m
[32m+[m[32m            style={{[m
[32m+[m[32m              width: '100%',[m
[32m+[m[32m              height: '300px',[m
[32m+[m[32m              padding: '15px',[m
[32m+[m[32m              backgroundColor: '#374151',[m
[32m+[m[32m              color: 'white',[m
[32m+[m[32m              border: '1px solid #4b5563',[m
[32m+[m[32m              borderRadius: '8px',[m
[32m+[m[32m              fontSize: '16px',[m
[32m+[m[32m              resize: 'vertical',[m
[32m+[m[32m              boxSizing: 'border-box'[m
[32m+[m[32m            }}[m
[32m+[m[32m          />[m
[32m+[m[32m          <button[m
[32m+[m[32m            style={{[m
[32m+[m[32m              marginTop: '15px',[m
[32m+[m[32m              padding: '10px 20px',[m
[32m+[m[32m              backgroundColor: '#3b82f6',[m
[32m+[m[32m              color: 'white',[m
[32m+[m[32m              border: 'none',[m
[32m+[m[32m              borderRadius: '6px',[m
[32m+[m[32m              cursor: 'pointer'[m
[32m+[m[32m            }}[m
[32m+[m[32m          >[m
[32m+[m[32m            Guardar Notas[m
[32m+[m[32m          </button>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      )}[m
[32m+[m
[32m+[m[32m      {showActivityModal && ([m
[32m+[m[32m        <div style={{[m
[32m+[m[32m          position: 'fixed',[m
[32m+[m[32m          top: 0,[m
[32m+[m[32m          left: 0,[m
[32m+[m[32m          width: '100%',[m
[32m+[m[32m          height: '100%',[m
[32m+[m[32m          backgroundColor: 'rgba(0,0,0,0.8)',[m
[32m+[m[32m          display: 'flex',[m
[32m+[m[32m          alignItems: 'center',[m
[32m+[m[32m          justifyContent: 'center',[m
[32m+[m[32m          zIndex: 1000[m
[32m+[m[32m        }}>[m
[32m+[m[32m          <div style={{[m
[32m+[m[32m            backgroundColor: '#1f2937',[m
[32m+[m[32m            padding: '30px',[m
[32m+[m[32m            borderRadius: '12px',[m
[32m+[m[32m            width: '90%',[m
[32m+[m[32m            maxWidth: '500px'[m
[32m+[m[32m          }}>[m
[32m+[m[32m            <h3>A√±adir Actividad</h3>[m
[32m+[m[41m            [m
[32m+[m[32m            <div style={{ marginBottom: '15px' }}>[m
[32m+[m[32m              <label style={{ display: 'block', marginBottom: '5px' }}>Nombre</label>[m
[32m+[m[32m              <input[m
[32m+[m[32m                type="text"[m
[32m+[m[32m                value={newActivity.name}[m
[32m+[m[32m                onChange={(e) => setNewActivity(prev => ({ ...prev, name: e.target.value }))}[m
[32m+[m[32m                style={{[m
[32m+[m[32m                  width: '100%',[m
[32m+[m[32m                  padding: '10px',[m
[32m+[m[32m                  backgroundColor: '#374151',[m
[32m+[m[32m                  color: 'white',[m
[32m+[m[32m                  border: '1px solid #4b5563',[m
[32m+[m[32m                  borderRadius: '6px',[m
[32m+[m[32m                  boxSizing: 'border-box'[m
[32m+[m[32m                }}[m
[32m+[m[32m              />[m
[32m+[m[32m            </div>[m
[32m+[m
[32m+[m[32m            <div style={{ marginBottom: '15px' }}>[m
[32m+[m[32m              <label style={{ display: 'block', marginBottom: '5px' }}>Categor√≠a</label>[m
[32m+[m[32m              <select[m
[32m+[m[32m                value={newActivity.category}[m
[32m+[m[32m                onChange={(e) => setNewActivity(prev => ({ ...prev, category: e.target.value as any }))}[m
[32m+[m[32m                style={{[m
[32m+[m[32m                  width: '100%',[m
[32m+[m[32m                  padding: '10px',[m
[32m+[m[32m                  backgroundColor: '#374151',[m
[32m+[m[32m                  color: 'white',[m
[32m+[m[32m                  border: '1px solid #4b5563',[m
[32m+[m[32m                  borderRadius: '6px'[m
[32m+[m[32m                }}[m
[32m+[m[32m              >[m
[32m+[m[32m                <option value="activity">Actividad</option>[m
[32m+[m[32m                <option value="transport">Transporte</option>[m
[32m+[m[32m                <option value="accommodation">Alojamiento</option>[m
[32m+[m[32m                <option value="food">Comida</option>[m
[32m+[m[32m                <option value="shopping">Compras</option>[m
[32m+[m[32m                <option value="other">Otro</option>[m
[32m+[m[32m              </select>[m
[32m+[m[32m            </div>[m
[32m+[m
[32m+[m[32m            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '15px', marginBottom: '15px' }}>[m
[32m+[m[32m              <div>[m
[32m+[m[32m                <label style={{ display: 'block', marginBottom: '5px' }}>Hora inicio</label>[m
[32m+[m[32m                <input[m
[32m+[m[32m                  type="time"[m
[32m+[m[32m                  value={newActivity.startTime}[m
[32m+[m[32m                  onChange={(e) => setNewActivity(prev => ({ ...prev, startTime: e.target.value }))}[m
[32m+[m[32m                  style={{[m
[32m+[m[32m                    width: '100%',[m
[32m+[m[32m                    padding: '10px',[m
[32m+[m[32m                    backgroundColor: '#374151',[m
[32m+[m[32m                    color: 'white',[m
[32m+[m[32m                    border: '1px solid #4b5563',[m
[32m+[m[32m                    borderRadius: '6px'[m
[32m+[m[32m                  }}[m
[32m+[m[32m                />[m
[32m+[m[32m              </div>[m
[32m+[m[32m              <div>[m
[32m+[m[32m                <label style={{ display: 'block', marginBottom: '5px' }}>Costo</label>[m
[32m+[m[32m                <input[m
[32m+[m[32m                  type="number"[m
[32m+[m[32m                  value={newActivity.cost}[m
[32m+[m[32m                  onChange={(e) => setNewActivity(prev => ({ ...prev, cost: Number(e.target.value) }))}[m
[32m+[m[32m                  style={{[m
[32m+[m[32m                    width: '100%',[m
[32m+[m[32m                    padding: '10px',[m
[32m+[m[32m                    backgroundColor: '#374151',[m
[32m+[m[32m                    color: 'white',[m
[32m+[m[32m                    border: '1px solid #4b5563',[m
[32m+[m[32m                    borderRadius: '6px'[m
[32m+[m[32m                  }}[m
[32m+[m[32m                />[m
[32m+[m[32m              </div>[m
[32m+[m[32m            </div>[m
[32m+[m
[32m+[m[32m            <div style={{ marginBottom: '15px' }}>[m
[32m+[m[32m              <label style={{ display: 'block', marginBottom: '5px' }}>Ubicaci√≥n</label>[m
[32m+[m[32m              <input[m
[32m+[m[32m                type="text"[m
[32m+[m[32m                value={newActivity.location}[m
[32m+[m[32m                onChange={(e) => setNewActivity(prev => ({ ...prev, location: e.target.value }))}[m
[32m+[m[32m                style={{[m
[32m+[m[32m                  width: '100%',[m
[32m+[m[32m                  padding: '10px',[m
[32m+[m[32m                  backgroundColor: '#374151',[m
[32m+[m[32m                  color: 'white',[m
[32m+[m[32m                  border: '1px solid #4b5563',[m
[32m+[m[32m                  borderRadius: '6px',[m
[32m+[m[32m                  boxSizing: 'border-box'[m
[32m+[m[32m                }}[m
[32m+[m[32m              />[m
[32m+[m[32m            </div>[m
[32m+[m
[32m+[m[32m            <div style={{ display: 'flex', gap: '10px', justifyContent: 'flex-end' }}>[m
[32m+[m[32m              <button[m
[32m+[m[32m                onClick={() => setShowActivityModal(false)}[m
[32m+[m[32m                style={{[m
[32m+[m[32m                  padding: '10px 20px',[m
[32m+[m[32m                  backgroundColor: '#6b7280',[m
[32m+[m[32m                  color: 'white',[m
[32m+[m[32m                  border: 'none',[m
[32m+[m[32m                  borderRadius: '6px',[m
[32m+[m[32m                  cursor: 'pointer'[m
[32m+[m[32m                }}[m
[32m+[m[32m              >[m
[32m+[m[32m                Cancelar[m
[32m+[m[32m              </button>[m
[32m+[m[32m              <button[m
[32m+[m[32m                onClick={addActivity}[m
[32m+[m[32m                style={{[m
[32m+[m[32m                  padding: '10px 20px',[m
[32m+[m[32m                  backgroundColor: '#10b981',[m
[32m+[m[32m                  color: 'white',[m
[32m+[m[32m                  border: 'none',[m
[32m+[m[32m                  borderRadius: '6px',[m
[32m+[m[32m                  cursor: 'pointer'[m
[32m+[m[32m                }}[m
[32m+[m[32m              >[m
[32m+[m[32m                A√±adir[m
[32m+[m[32m              </button>[m
[32m+[m[32m            </div>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      )}[m
[32m+[m[32m    </div>[m
[32m+[m[32m  );[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mexport default TripPlanner;[m
[1mdiff --git a/src/components/ui/NotificationContainer.tsx b/src/components/ui/NotificationContainer.tsx[m
[1mnew file mode 100644[m
[1mindex 0000000..bbbd78c[m
[1m--- /dev/null[m
[1m+++ b/src/components/ui/NotificationContainer.tsx[m
[36m@@ -0,0 +1,100 @@[m
[32m+[m[32mÔªøimport React from 'react';[m
[32m+[m[32mimport { useNotifications } from '../../contexts/NotificationContext';[m
[32m+[m[32mimport type { Notification } from '../../contexts/NotificationContext';[m
[32m+[m
[32m+[m[32mconst NotificationItem: React.FC<{[m[41m [m
[32m+[m[32m  notification: Notification;[m[41m [m
[32m+[m[32m  onRemove: (id: string) => void;[m[41m [m
[32m+[m[32m}> = ({ notification, onRemove }) => {[m
[32m+[m[32m  const getNotificationStyle = (type: Notification['type']) => {[m
[32m+[m[32m    const baseStyle = {[m
[32m+[m[32m      padding: '16px',[m
[32m+[m[32m      borderRadius: '8px',[m
[32m+[m[32m      marginBottom: '12px',[m
[32m+[m[32m      boxShadow: '0 4px 12px rgba(0, 0, 0, 0.1)',[m
[32m+[m[32m      display: 'flex',[m
[32m+[m[32m      alignItems: 'flex-start',[m
[32m+[m[32m      justifyContent: 'space-between',[m
[32m+[m[32m      maxWidth: '400px',[m
[32m+[m[32m      position: 'relative' as const,[m
[32m+[m[32m      overflow: 'hidden' as const,[m
[32m+[m[32m      transform: 'translateX(0)',[m
[32m+[m[32m      transition: 'all 0.3s ease-out'[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    const typeStyles = {[m
[32m+[m[32m      success: { backgroundColor: '#10b981', color: 'white', borderLeft: '4px solid #059669' },[m
[32m+[m[32m      error: { backgroundColor: '#ef4444', color: 'white', borderLeft: '4px solid #dc2626' },[m
[32m+[m[32m      warning: { backgroundColor: '#f59e0b', color: 'white', borderLeft: '4px solid #d97706' },[m
[32m+[m[32m      info: { backgroundColor: '#3b82f6', color: 'white', borderLeft: '4px solid #2563eb' }[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    return { ...baseStyle, ...typeStyles[type] };[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  const getIcon = (type: Notification['type']) => {[m
[32m+[m[32m    const icons = { success: '‚úì', error: '√ó', warning: '‚ö†', info: 'i' };[m
[32m+[m[32m    return icons[type];[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  return ([m
[32m+[m[32m    <div style={getNotificationStyle(notification.type)}>[m
[32m+[m[32m      <div style={{ display: 'flex', alignItems: 'flex-start', flex: 1 }}>[m
[32m+[m[32m        <div style={{[m
[32m+[m[32m          width: '24px', height: '24px', borderRadius: '50%',[m
[32m+[m[32m          backgroundColor: 'rgba(255, 255, 255, 0.2)',[m
[32m+[m[32m          display: 'flex', alignItems: 'center', justifyContent: 'center',[m
[32m+[m[32m          marginRight: '12px', fontSize: '14px', fontWeight: 'bold'[m
[32m+[m[32m        }}>[m
[32m+[m[32m          {getIcon(notification.type)}[m
[32m+[m[32m        </div>[m
[32m+[m[41m        [m
[32m+[m[32m        <div style={{ flex: 1 }}>[m
[32m+[m[32m          <h4 style={{ margin: '0 0 4px 0', fontSize: '14px', fontWeight: '600' }}>[m
[32m+[m[32m            {notification.title}[m
[32m+[m[32m          </h4>[m
[32m+[m[32m          <p style={{ margin: '0', fontSize: '13px', opacity: 0.9, lineHeight: '1.4' }}>[m
[32m+[m[32m            {notification.message}[m
[32m+[m[32m          </p>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </div>[m
[32m+[m[41m      [m
[32m+[m[32m      <button[m
[32m+[m[32m        onClick={() => onRemove(notification.id)}[m
[32m+[m[32m        style={{[m
[32m+[m[32m          background: 'none', border: 'none', color: 'rgba(255, 255, 255, 0.8)',[m
[32m+[m[32m          cursor: 'pointer', fontSize: '18px', padding: '0',[m
[32m+[m[32m          width: '20px', height: '20px',[m
[32m+[m[32m          display: 'flex', alignItems: 'center', justifyContent: 'center'[m
[32m+[m[32m        }}[m
[32m+[m[32m      >[m
[32m+[m[32m        √ó[m
[32m+[m[32m      </button>[m
[32m+[m[32m    </div>[m
[32m+[m[32m  );[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mconst NotificationContainer: React.FC = () => {[m
[32m+[m[32m  const { notifications, removeNotification } = useNotifications();[m
[32m+[m
[32m+[m[32m  if (notifications.length === 0) return null;[m
[32m+[m
[32m+[m[32m  return ([m
[32m+[m[32m    <div style={{[m
[32m+[m[32m      position: 'fixed', top: '20px', right: '20px',[m
[32m+[m[32m      zIndex: 1000, pointerEvents: 'none'[m
[32m+[m[32m    }}>[m
[32m+[m[32m      <div style={{ pointerEvents: 'auto' }}>[m
[32m+[m[32m        {notifications.map(notification => ([m
[32m+[m[32m          <NotificationItem[m
[32m+[m[32m            key={notification.id}[m
[32m+[m[32m            notification={notification}[m
[32m+[m[32m            onRemove={removeNotification}[m
[32m+[m[32m          />[m
[32m+[m[32m        ))}[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </div>[m
[32m+[m[32m  );[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mexport default NotificationContainer;[m
[1mdiff --git a/src/contexts/AuthContext.tsx b/src/contexts/AuthContext.tsx[m
[1mindex 606921a..3e94edd 100644[m
[1m--- a/src/contexts/AuthContext.tsx[m
[1m+++ b/src/contexts/AuthContext.tsx[m
[36m@@ -33,59 +33,55 @@[m [mexport interface AuthContextType {[m
   isAuthenticated: boolean;[m
 }[m
 [m
[31m-const AuthContext = createContext<AuthContextType | null>(null);[m
[31m-[m
[31m-// Mock users database (en producci√≥n esto vendr√≠a de un backend)[m
 const MOCK_USERS = [[m
   {[m
[31m-    id: '1',[m
[32m+[m[32m    id: 'demo-user',[m
     email: 'demo@tripwase.com',[m
     password: 'demo123',[m
     name: 'Usuario Demo',[m
     role: 'user' as const,[m
     createdAt: '2024-01-01T00:00:00.000Z'[m
[31m-  },[m
[31m-  {[m
[31m-    id: '2',[m
[31m-    email: 'admin@tripwase.com',[m
[31m-    password: 'admin123',[m
[31m-    name: 'Admin TripWase',[m
[31m-    role: 'admin' as const,[m
[31m-    createdAt: '2024-01-01T00:00:00.000Z'[m
   }[m
 ];[m
 [m
[32m+[m[32mconst AuthContext = createContext<AuthContextType | null>(null);[m
[32m+[m
 export const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {[m
   const [user, setUser] = useLocalStorage<User | null>('tripwase_user', null);[m
   const [error, setError] = useState<string | null>(null);[m
   const [isLoading, setIsLoading] = useState(false);[m
 [m
[31m-  // Auto-login check on mount[m
[32m+[m[32m  // Auto-login con usuario demo si no hay usuario[m
   useEffect(() => {[m
[31m-    if (user) {[m
[31m-      console.log('Usuario autenticado autom√°ticamente:', user.name);[m
[32m+[m[32m    if (!user) {[m
[32m+[m[32m      const demoUser: User = {[m
[32m+[m[32m        id: 'demo-user',[m
[32m+[m[32m        email: 'demo@tripwase.com',[m
[32m+[m[32m        name: 'Usuario Demo',[m
[32m+[m[32m        role: 'user',[m
[32m+[m[32m        createdAt: '2024-01-01T00:00:00.000Z',[m
[32m+[m[32m        lastLogin: new Date().toISOString()[m
[32m+[m[32m      };[m
[32m+[m[32m      setUser(demoUser);[m
[32m+[m[32m      console.log('Auto-login con usuario demo');[m
     }[m
[31m-  }, [user]);[m
[32m+[m[32m  }, [user, setUser]);[m
 [m
[31m-  // Simulaci√≥n de API de login[m
   const login = useCallback(async (loginData: LoginData): Promise<void> => {[m
     setIsLoading(true);[m
     setError(null);[m
 [m
     try {[m
[31m-      // Simular delay de red[m
[31m-      await new Promise(resolve => setTimeout(resolve, 1000));[m
[32m+[m[32m      await new Promise(resolve => setTimeout(resolve, 500));[m
 [m
[31m-      // Buscar usuario en mock database[m
       const mockUser = MOCK_USERS.find(u => [m
         u.email === loginData.email && u.password === loginData.password[m
       );[m
 [m
       if (!mockUser) {[m
[31m-        throw new Error('Credenciales incorrectas');[m
[32m+[m[32m        throw new Error('Email o contrase√±a incorrectos');[m
       }[m
 [m
[31m-      // Crear objeto de usuario autenticado[m
       const authenticatedUser: User = {[m
         id: mockUser.id,[m
         email: mockUser.email,[m
[36m@@ -96,8 +92,7 @@[m [mexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children[m
       };[m
 [m
       setUser(authenticatedUser);[m
[31m-      console.log('Login exitoso:', authenticatedUser.name);[m
[31m-[m
[32m+[m[41m      [m
     } catch (err) {[m
       const errorMessage = err instanceof Error ? err.message : 'Error al iniciar sesi√≥n';[m
       setError(errorMessage);[m
[36m@@ -107,22 +102,13 @@[m [mexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children[m
     }[m
   }, [setUser]);[m
 [m
[31m-  // Simulaci√≥n de API de registro[m
   const register = useCallback(async (registerData: RegisterData): Promise<void> => {[m
     setIsLoading(true);[m
     setError(null);[m
 [m
     try {[m
[31m-      // Simular delay de red[m
[31m-      await new Promise(resolve => setTimeout(resolve, 1200));[m
[32m+[m[32m      await new Promise(resolve => setTimeout(resolve, 800));[m
 [m
[31m-      // Verificar si el email ya existe[m
[31m-      const existingUser = MOCK_USERS.find(u => u.email === registerData.email);[m
[31m-      if (existingUser) {[m
[31m-        throw new Error('Este email ya est√° registrado');[m
[31m-      }[m
[31m-[m
[31m-      // Validaciones b√°sicas[m
       if (!registerData.name || registerData.name.trim().length < 2) {[m
         throw new Error('El nombre debe tener al menos 2 caracteres');[m
       }[m
[36m@@ -135,9 +121,8 @@[m [mexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children[m
         throw new Error('La contrase√±a debe tener al menos 6 caracteres');[m
       }[m
 [m
[31m-      // Crear nuevo usuario[m
       const newUser: User = {[m
[31m-        id: Date.now().toString(),[m
[32m+[m[32m        id: `user_${Date.now()}`,[m
         email: registerData.email,[m
         name: registerData.name.trim(),[m
         role: 'user',[m
[36m@@ -145,15 +130,8 @@[m [mexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children[m
         lastLogin: new Date().toISOString()[m
       };[m
 [m
[31m-      // En producci√≥n, aqu√≠ se guardar√≠a en el backend[m
[31m-      MOCK_USERS.push({[m
[31m-        ...newUser,[m
[31m-        password: registerData.password[m
[31m-      });[m
[31m-[m
       setUser(newUser);[m
[31m-      console.log('Registro exitoso:', newUser.name);[m
[31m-[m
[32m+[m[41m      [m
     } catch (err) {[m
       const errorMessage = err instanceof Error ? err.message : 'Error al crear cuenta';[m
       setError(errorMessage);[m
[36m@@ -163,40 +141,31 @@[m [mexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children[m
     }[m
   }, [setUser]);[m
 [m
[31m-  // Logout[m
   const logout = useCallback(() => {[m
     setUser(null);[m
     setError(null);[m
[31m-    console.log('Sesi√≥n cerrada');[m
   }, [setUser]);[m
 [m
[31m-  // Limpiar errores[m
   const clearError = useCallback(() => {[m
     setError(null);[m
   }, []);[m
 [m
[31m-  // Actualizar perfil[m
   const updateProfile = useCallback((updates: Partial<User>) => {[m
[31m-    setUser(prev => {[m
[31m-      if (!prev) return null;[m
[31m-      [m
[31m-      const updatedUser = {[m
[31m-        ...prev,[m
[31m-        ...updates,[m
[31m-        id: prev.id, // No permitir cambio de ID[m
[31m-        createdAt: prev.createdAt, // No permitir cambio de fecha de creaci√≥n[m
[31m-      };[m
[32m+[m[32m    if (!user) return;[m
[32m+[m[41m    [m
[32m+[m[32m    const updatedUser: User = {[m
[32m+[m[32m      ...user,[m
[32m+[m[32m      ...updates,[m
[32m+[m[32m      id: user.id,[m
[32m+[m[32m      createdAt: user.createdAt,[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    setUser(updatedUser);[m
[32m+[m[32m  }, [user, setUser]);[m
 [m
[31m-      console.log('Perfil actualizado:', updatedUser.name);[m
[31m-      return updatedUser;[m
[31m-    });[m
[31m-  }, [setUser]);[m
[31m-[m
[31m-  // Estado de autenticaci√≥n[m
   const isAuthenticated = !!user;[m
 [m
[31m-  // Contexto value[m
[31m-  const value: AuthContextType = {[m
[32m+[m[32m  const contextValue: AuthContextType = {[m
     user,[m
     error,[m
     isLoading,[m
[36m@@ -209,20 +178,16 @@[m [mexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children[m
   };[m
 [m
   return ([m
[31m-    <AuthContext.Provider value={value}>[m
[32m+[m[32m    <AuthContext.Provider value={contextValue}>[m
       {children}[m
     </AuthContext.Provider>[m
   );[m
 };[m
 [m
[31m-// Hook personalizado para usar el contexto[m
 export const useAuth = () => {[m
   const context = useContext(AuthContext);[m
   if (!context) {[m
[31m-    throw new Error('useAuth must be used within AuthProvider');[m
[32m+[m[32m    throw new Error('useAuth debe ser usado dentro de un AuthProvider');[m
   }[m
   return context;[m
 };[m
[31m-[m
[31m-// Exportar tambi√©n el contexto para uso directo si es necesario[m
[31m-export { AuthContext };[m
\ No newline at end of file[m
[1mdiff --git a/src/contexts/NotificationContext.tsx b/src/contexts/NotificationContext.tsx[m
[1mnew file mode 100644[m
[1mindex 0000000..30abdf9[m
[1m--- /dev/null[m
[1m+++ b/src/contexts/NotificationContext.tsx[m
[36m@@ -0,0 +1,94 @@[m
[32m+[m[32mÔªøimport React, { createContext, useContext, useState, useCallback } from 'react';[m
[32m+[m
[32m+[m[32mexport interface Notification {[m
[32m+[m[32m  id: string;[m
[32m+[m[32m  type: 'success' | 'error' | 'warning' | 'info';[m
[32m+[m[32m  title: string;[m
[32m+[m[32m  message: string;[m
[32m+[m[32m  duration?: number;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32minterface NotificationContextType {[m
[32m+[m[32m  notifications: Notification[];[m
[32m+[m[32m  addNotification: (notification: Omit<Notification, 'id'>) => string;[m
[32m+[m[32m  removeNotification: (id: string) => void;[m
[32m+[m[32m  clearAll: () => void;[m
[32m+[m[32m  success: (title: string, message: string, duration?: number) => string;[m
[32m+[m[32m  error: (title: string, message: string, duration?: number) => string;[m
[32m+[m[32m  warning: (title: string, message: string, duration?: number) => string;[m
[32m+[m[32m  info: (title: string, message: string, duration?: number) => string;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mconst NotificationContext = createContext<NotificationContextType | null>(null);[m
[32m+[m
[32m+[m[32mexport const NotificationProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {[m
[32m+[m[32m  const [notifications, setNotifications] = useState<Notification[]>([]);[m
[32m+[m
[32m+[m[32m  const addNotification = useCallback((notification: Omit<Notification, 'id'>): string => {[m
[32m+[m[32m    const id = `notification_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;[m
[32m+[m[32m    const newNotification: Notification = {[m
[32m+[m[32m      ...notification,[m
[32m+[m[32m      id,[m
[32m+[m[32m      duration: notification.duration ?? 5000[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    setNotifications(prev => [...prev, newNotification]);[m
[32m+[m
[32m+[m[32m    if (newNotification.duration && newNotification.duration > 0) {[m
[32m+[m[32m      setTimeout(() => {[m
[32m+[m[32m        removeNotification(id);[m
[32m+[m[32m      }, newNotification.duration);[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    return id;[m
[32m+[m[32m  }, []);[m
[32m+[m
[32m+[m[32m  const removeNotification = useCallback((id: string) => {[m
[32m+[m[32m    setNotifications(prev => prev.filter(notification => notification.id !== id));[m
[32m+[m[32m  }, []);[m
[32m+[m
[32m+[m[32m  const clearAll = useCallback(() => {[m
[32m+[m[32m    setNotifications([]);[m
[32m+[m[32m  }, []);[m
[32m+[m
[32m+[m[32m  const success = useCallback((title: string, message: string, duration?: number) => {[m
[32m+[m[32m    return addNotification({ type: 'success', title, message, duration });[m
[32m+[m[32m  }, [addNotification]);[m
[32m+[m
[32m+[m[32m  const error = useCallback((title: string, message: string, duration?: number) => {[m
[32m+[m[32m    return addNotification({ type: 'error', title, message, duration: duration ?? 8000 });[m
[32m+[m[32m  }, [addNotification]);[m
[32m+[m
[32m+[m[32m  const warning = useCallback((title: string, message: string, duration?: number) => {[m
[32m+[m[32m    return addNotification({ type: 'warning', title, message, duration });[m
[32m+[m[32m  }, [addNotification]);[m
[32m+[m
[32m+[m[32m  const info = useCallback((title: string, message: string, duration?: number) => {[m
[32m+[m[32m    return addNotification({ type: 'info', title, message, duration });[m
[32m+[m[32m  }, [addNotification]);[m
[32m+[m
[32m+[m[32m  const contextValue: NotificationContextType = {[m
[32m+[m[32m    notifications,[m
[32m+[m[32m    addNotification,[m
[32m+[m[32m    removeNotification,[m
[32m+[m[32m    clearAll,[m
[32m+[m[32m    success,[m
[32m+[m[32m    error,[m
[32m+[m[32m    warning,[m
[32m+[m[32m    info[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  return ([m
[32m+[m[32m    <NotificationContext.Provider value={contextValue}>[m
[32m+[m[32m      {children}[m
[32m+[m[32m    </NotificationContext.Provider>[m
[32m+[m[32m  );[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mexport const useNotifications = () => {[m
[32m+[m[32m  const context = useContext(NotificationContext);[m
[32m+[m[32m  if (!context) {[m
[32m+[m[32m    throw new Error('useNotifications debe ser usado dentro de NotificationProvider');[m
[32m+[m[32m  }[m
[32m+[m[32m  return context;[m
[32m+[m[32m};[m
[1mdiff --git a/src/contexts/TripContext.backup.tsx b/src/contexts/TripContext.backup.tsx[m
[1mnew file mode 100644[m
[1mindex 0000000..779c279[m
[1m--- /dev/null[m
[1m+++ b/src/contexts/TripContext.backup.tsx[m
[36m@@ -0,0 +1,311 @@[m
[32m+[m[32mimport React, { createContext, useState, useEffect, useCallback, useMemo } from 'react';[m
[32m+[m[32mimport { useNavigate } from 'react-router-dom';[m
[32m+[m[32mimport useLocalStorage from '../hooks/useLocalStorage';[m
[32m+[m[32mimport useAsync from '../hooks/useAsync';[m
[32m+[m[32mimport useDebounce from '../hooks/useDebounce';[m
[32m+[m
[32m+[m[32mexport interface Destination {[m
[32m+[m[32m  id: string;[m
[32m+[m[32m  name: string;[m
[32m+[m[32m  country: string;[m
[32m+[m[32m  description: string;[m
[32m+[m[32m  averagePrice: number;[m
[32m+[m[32m  currency: string;[m
[32m+[m[32m  popularityScore: number;[m
[32m+[m[32m  weatherInfo: {[m
[32m+[m[32m    averageTemp: number;[m
[32m+[m[32m    bestMonths: string[];[m
[32m+[m[32m    climate: string;[m
[32m+[m[32m  };[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport interface Trip {[m
[32m+[m[32m  id: string;[m
[32m+[m[32m  name: string;[m
[32m+[m[32m  destination: Destination;[m
[32m+[m[32m  dates: { startDate: string; endDate: string; };[m
[32m+[m[32m  travelers: { adults: number; children: number; };[m
[32m+[m[32m  budget: { total: number; spent: number; currency: string; };[m
[32m+[m[32m  status: 'planning' | 'confirmed' | 'completed' | 'cancelled';[m
[32m+[m[32m  createdAt: string;[m
[32m+[m[32m  updatedAt: string;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport interface SearchFilters {[m
[32m+[m[32m  budget: { min: number; max: number; currency: string; };[m
[32m+[m[32m  dates: { startDate: string | null; endDate: string | null; };[m
[32m+[m[32m  travelers: { adults: number; children: number; };[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport interface TripContextType {[m
[32m+[m[32m  searchQuery: string;[m
[32m+[m[32m  searchResults: Destination[];[m
[32m+[m[32m  isSearching: boolean;[m
[32m+[m[32m  currentTrip: Trip | null;[m
[32m+[m[32m  trips: Trip[];[m
[32m+[m[32m  favorites: Destination[];[m
[32m+[m[32m  searchHistory: string[];[m
[32m+[m[32m  searchFilters: SearchFilters;[m
[32m+[m[32m  error: string | null;[m
[32m+[m[32m  searchDestinations: (query: string) => void;[m
[32m+[m[32m  updateSearchFilters: (filters: Partial<SearchFilters>) => void;[m
[32m+[m[32m  startTripPlanning: (destination: Destination) => void;[m
[32m+[m[32m  updateTripDetails: (updates: Partial<Trip>) => void;[m
[32m+[m[32m  editTrip: (trip: Trip) => void;[m
[32m+[m[32m  saveTrip: () => void;[m
[32m+[m[32m  deleteTrip: (tripId: string) => void;[m
[32m+[m[32m  addToFavorites: (destination: Destination) => void;[m
[32m+[m[32m  removeFromFavorites: (destinationId: string) => void;[m
[32m+[m[32m  isFavorite: (destinationId: string) => boolean;[m
[32m+[m[32m  getTripDuration: () => number;[m
[32m+[m[32m  clearError: () => void;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mconst initialSearchFilters: SearchFilters = {[m
[32m+[m[32m  budget: { min: 0, max: 5000, currency: 'EUR' },[m
[32m+[m[32m  dates: { startDate: null, endDate: null },[m
[32m+[m[32m  travelers: { adults: 2, children: 0 }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mconst MOCK_DESTINATIONS: Destination[] = [[m
[32m+[m[32m  {[m
[32m+[m[32m    id: 'madrid', name: 'Madrid', country: 'EspaÒa',[m
[32m+[m[32m    description: 'Capital vibrante con rica historia.',[m
[32m+[m[32m    averagePrice: 85, currency: 'EUR', popularityScore: 9.2,[m
[32m+[m[32m    weatherInfo: { averageTemp: 18, bestMonths: ['Mayo', 'Junio'], climate: 'Continental' }[m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    id: 'barcelona', name: 'Barcelona', country: 'EspaÒa',[m
[32m+[m[32m    description: 'Ciudad cosmopolita con arquitectura ˙nica.',[m
[32m+[m[32m    averagePrice: 92, currency: 'EUR', popularityScore: 9.5,[m
[32m+[m[32m    weatherInfo: { averageTemp: 20, bestMonths: ['Abril', 'Mayo'], climate: 'Mediterr·neo' }[m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    id: 'paris', name: 'ParÌs', country: 'Francia',[m
[32m+[m[32m    description: 'Ciudad del amor con monumentos icÛnicos.',[m
[32m+[m[32m    averagePrice: 125, currency: 'EUR', popularityScore: 9.8,[m
[32m+[m[32m    weatherInfo: { averageTemp: 16, bestMonths: ['Mayo', 'Junio'], climate: 'Oce·nico' }[m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    id: 'rome', name: 'Roma', country: 'Italia',[m
[32m+[m[32m    description: 'Ciudad eterna con historia milenaria.',[m
[32m+[m[32m    averagePrice: 95, currency: 'EUR', popularityScore: 9.4,[m
[32m+[m[32m    weatherInfo: { averageTemp: 19, bestMonths: ['Abril', 'Mayo'], climate: 'Mediterr·neo' }[m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    id: 'london', name: 'Londres', country: 'Reino Unido',[m
[32m+[m[32m    description: 'MetrÛpoli multicultural con tradiciÛn.',[m
[32m+[m[32m    averagePrice: 140, currency: 'EUR', popularityScore: 9.1,[m
[32m+[m[32m    weatherInfo: { averageTemp: 12, bestMonths: ['Junio', 'Julio'], climate: 'Oce·nico' }[m
[32m+[m[32m  }[m
[32m+[m[32m];[m
[32m+[m
[32m+[m[32mexport const TripContext = createContext<TripContextType | null>(null);[m
[32m+[m
[32m+[m[32mconst TripProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {[m
[32m+[m[32m  const [searchQuery, setSearchQuery] = useState('');[m
[32m+[m[32m  const [searchResults, setSearchResults] = useState<Destination[]>([]);[m
[32m+[m[32m  const [isSearching, setIsSearching] = useState(false);[m
[32m+[m[32m  const [currentTrip, setCurrentTrip] = useState<Trip | null>(null);[m
[32m+[m[32m  const [error, setError] = useState<string | null>(null);[m
[32m+[m[32m  const [searchFilters, setSearchFilters] = useState<SearchFilters>(initialSearchFilters);[m
[32m+[m[41m  [m
[32m+[m[32m  const [trips, setTrips] = useLocalStorage<Trip[]>('tripwase_trips', []);[m
[32m+[m[32m  const [favorites, setFavorites] = useLocalStorage<Destination[]>('tripwase_favorites', []);[m
[32m+[m[32m  const [searchHistory, setSearchHistory] = useLocalStorage<string[]>('tripwase_search_history', []);[m
[32m+[m[41m  [m
[32m+[m[32m  const debouncedQuery = useDebounce(searchQuery, 300);[m
[32m+[m
[32m+[m[32m  const performSearch = useMemo(() => {[m
[32m+[m[32m    return async (query: string): Promise<Destination[]> => {[m
[32m+[m[32m      if (!query || query.trim().length === 0) return [];[m
[32m+[m[41m      [m
[32m+[m[32m      await new Promise(resolve => setTimeout(resolve, 500));[m
[32m+[m[41m      [m
[32m+[m[32m      return MOCK_DESTINATIONS.filter(d =>[m[41m [m
[32m+[m[32m        d.name.toLowerCase().includes(query.toLowerCase()) ||[m
[32m+[m[32m        d.country.toLowerCase().includes(query.toLowerCase()) ||[m
[32m+[m[32m        d.description.toLowerCase().includes(query.toLowerCase())[m
[32m+[m[32m      );[m
[32m+[m[32m    };[m
[32m+[m[32m  }, []);[m
[32m+[m
[32m+[m[32m  useEffect(() => {[m
[32m+[m[32m    let isCancelled = false;[m
[32m+[m
[32m+[m[32m    const executeSearch = async () => {[m
[32m+[m[32m      if (debouncedQuery && debouncedQuery.trim().length > 0) {[m
[32m+[m[32m        setIsSearching(true);[m
[32m+[m[32m        setError(null);[m
[32m+[m[41m        [m
[32m+[m[32m        try {[m
[32m+[m[32m          const results = await performSearch(debouncedQuery);[m
[32m+[m[41m          [m
[32m+[m[32m          if (!isCancelled) {[m
[32m+[m[32m            setSearchResults(results);[m
[32m+[m[41m            [m
[32m+[m[32m            setSearchHistory(prev => {[m
[32m+[m[32m              if (prev[0] === debouncedQuery) return prev;[m
[32m+[m[32m              const filtered = prev.filter(h => h !== debouncedQuery);[m
[32m+[m[32m              return [debouncedQuery, ...filtered].slice(0, 10);[m
[32m+[m[32m            });[m
[32m+[m[32m          }[m
[32m+[m[32m        } catch (err) {[m
[32m+[m[32m          if (!isCancelled) {[m
[32m+[m[32m            console.error('Error en b˙squeda:', err);[m
[32m+[m[32m            setError('Error al buscar destinos');[m
[32m+[m[32m            setSearchResults([]);[m
[32m+[m[32m          }[m
[32m+[m[32m        } finally {[m
[32m+[m[32m          if (!isCancelled) {[m
[32m+[m[32m            setIsSearching(false);[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
[32m+[m[32m      } else {[m
[32m+[m[32m        setSearchResults([]);[m
[32m+[m[32m        setIsSearching(false);[m
[32m+[m[32m      }[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    executeSearch();[m
[32m+[m
[32m+[m[32m    return () => {[m
[32m+[m[32m      isCancelled = true;[m
[32m+[m[32m    };[m
[32m+[m[32m  }, [debouncedQuery, performSearch, setSearchHistory]);[m
[32m+[m
[32m+[m[32m  const updateSearchFilters = useCallback((newFilters: Partial<SearchFilters>) => {[m
[32m+[m[32m    setSearchFilters(prev => ({[m
[32m+[m[32m      ...prev,[m
[32m+[m[32m      ...newFilters,[m
[32m+[m[32m      budget: newFilters.budget ? { ...prev.budget, ...newFilters.budget } : prev.budget,[m
[32m+[m[32m      dates: newFilters.dates ? { ...prev.dates, ...newFilters.dates } : prev.dates,[m
[32m+[m[32m      travelers: newFilters.travelers ? { ...prev.travelers, ...newFilters.travelers } : prev.travelers[m
[32m+[m[32m    }));[m
[32m+[m[32m  }, []);[m
[32m+[m
[32m+[m[32m  const startTripPlanning = useCallback((destination: Destination) => {[m
[32m+[m[32m    const newTrip: Trip = {[m
[32m+[m[32m      id: 'trip_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),[m
[32m+[m[32m      name: `Viaje a ${destination.name}`,[m
[32m+[m[32m      destination,[m
[32m+[m[32m      dates: {[m[41m [m
[32m+[m[32m        startDate: searchFilters.dates.startDate || '',[m[41m [m
[32m+[m[32m        endDate: searchFilters.dates.endDate || ''[m[41m [m
[32m+[m[32m      },[m
[32m+[m[32m      travelers: { ...searchFilters.travelers },[m
[32m+[m[32m      budget: {[m[41m [m
[32m+[m[32m        total: searchFilters.budget.max,[m[41m [m
[32m+[m[32m        spent: 0,[m[41m [m
[32m+[m[32m        currency: searchFilters.budget.currency[m[41m [m
[32m+[m[32m      },[m
[32m+[m[32m      status: 'planning',[m
[32m+[m[32m      createdAt: new Date().toISOString(),[m
[32m+[m[32m      updatedAt: new Date().toISOString()[m
[32m+[m[32m    };[m
[32m+[m[32m    setCurrentTrip(newTrip);[m
[32m+[m[32m  }, [searchFilters]);[m
[32m+[m
[32m+[m[32m  const updateTripDetails = useCallback((updates: Partial<Trip>) => {[m
[32m+[m[32m    setCurrentTrip(prev => {[m
[32m+[m[32m      if (!prev) return null;[m
[32m+[m[32m      return {[m[41m [m
[32m+[m[32m        ...prev,[m[41m [m
[32m+[m[32m        ...updates,[m[41m [m
[32m+[m[32m        updatedAt: new Date().toISOString()[m[41m [m
[32m+[m[32m      };[m
[32m+[m[32m    });[m
[32m+[m[32m  }, []);[m
[32m+[m
[32m+[m[32m  const editTrip = useCallback((trip: Trip) => {[m
[32m+[m[32m    setCurrentTrip(trip);[m
[32m+[m[32m  }, []);[m
[32m+[m
[32m+[m[32m  const saveTrip = useCallback(() => {[m
[32m+[m[32m    if (!currentTrip) return;[m
[32m+[m[41m    [m
[32m+[m[32m    setTrips(prev => {[m
[32m+[m[32m      const filtered = prev.filter(t => t.id !== currentTrip.id);[m
[32m+[m[32m      return [...filtered, currentTrip];[m
[32m+[m[32m    });[m
[32m+[m[32m    setCurrentTrip(null);[m
[32m+[m[32m  }, [currentTrip, setTrips]);[m
[32m+[m
[32m+[m[32m  const deleteTrip = useCallback((tripId: string) => {[m
[32m+[m[32m    setTrips(prev => prev.filter(t => t.id !== tripId));[m
[32m+[m[32m    if (currentTrip?.id === tripId) {[m
[32m+[m[32m      setCurrentTrip(null);[m
[32m+[m[32m    }[m
[32m+[m[32m  }, [setTrips, currentTrip]);[m
[32m+[m
[32m+[m[32m  const addToFavorites = useCallback((destination: Destination) => {[m
[32m+[m[32m    setFavorites(prev => {[m
[32m+[m[32m      if (prev.some(f => f.id === destination.id)) return prev;[m
[32m+[m[32m      return [...prev, destination];[m
[32m+[m[32m    });[m
[32m+[m[32m  }, [setFavorites]);[m
[32m+[m
[32m+[m[32m  const removeFromFavorites = useCallback((destinationId: string) => {[m
[32m+[m[32m    setFavorites(prev => prev.filter(f => f.id !== destinationId));[m
[32m+[m[32m  }, [setFavorites]);[m
[32m+[m
[32m+[m[32m  const isFavorite = useCallback((destinationId: string) => {[m
[32m+[m[32m    return favorites.some(f => f.id === destinationId);[m
[32m+[m[32m  }, [favorites]);[m
[32m+[m
[32m+[m[32m  const getTripDuration = useCallback(() => {[m
[32m+[m[32m    if (!currentTrip?.dates.startDate || !currentTrip?.dates.endDate) return 0;[m
[32m+[m[41m    [m
[32m+[m[32m    const start = new Date(currentTrip.dates.startDate);[m
[32m+[m[32m    const end = new Date(currentTrip.dates.endDate);[m
[32m+[m[32m    const diffTime = end.getTime() - start.getTime();[m
[32m+[m[32m    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));[m
[32m+[m[41m    [m
[32m+[m[32m    return diffDays > 0 ? diffDays : 0;[m
[32m+[m[32m  }, [currentTrip]);[m
[32m+[m
[32m+[m[32m  const clearError = useCallback(() => {[m
[32m+[m[32m    setError(null);[m
[32m+[m[32m  }, []);[m
[32m+[m
[32m+[m[32m  const searchDestinations = useCallback((query: string) => {[m
[32m+[m[32m    setSearchQuery(query);[m
[32m+[m[32m  }, []);[m
[32m+[m
[32m+[m[32m  const contextValue = useMemo((): TripContextType => ({[m
[32m+[m[32m    searchQuery,[m
[32m+[m[32m    searchResults,[m
[32m+[m[32m    isSearching,[m
[32m+[m[32m    currentTrip,[m
[32m+[m[32m    trips,[m
[32m+[m[32m    favorites,[m
[32m+[m[32m    searchHistory,[m
[32m+[m[32m    searchFilters,[m
[32m+[m[32m    error,[m
[32m+[m[32m    searchDestinations,[m
[32m+[m[32m    updateSearchFilters,[m
[32m+[m[32m    startTripPlanning,[m
[32m+[m[32m    updateTripDetails,[m
[32m+[m[32m    editTrip,[m
[32m+[m[32m    saveTrip,[m
[32m+[m[32m    deleteTrip,[m
[32m+[m[32m    addToFavorites,[m
[32m+[m[32m    removeFromFavorites,[m
[32m+[m[32m    isFavorite,[m
[32m+[m[32m    getTripDuration,[m
[32m+[m[32m    clearError[m
[32m+[m[32m  }), [[m
[32m+[m[32m    searchQuery, searchResults, isSearching, currentTrip, trips, favorites,[m
[32m+[m[32m    searchHistory, searchFilters, error, searchDestinations, updateSearchFilters,[m
[32m+[m[32m    startTripPlanning, updateTripDetails, editTrip, saveTrip, deleteTrip,[m
[32m+[m[32m    addToFavorites, removeFromFavorites, isFavorite, getTripDuration, clearError[m
[32m+[m[32m  ]);[m
[32m+[m
[32m+[m[32m  return ([m
[32m+[m[32m    <TripContext.Provider value={contextValue}>[m
[32m+[m[32m      {children}[m
[32m+[m[32m    </TripContext.Provider>[m
[32m+[m[32m  );[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mexport { TripProvider };[m
[1mdiff --git a/src/contexts/TripContext.tsx b/src/contexts/TripContext.tsx[m
[1mindex 7829c09..1e91f88 100644[m
[1m--- a/src/contexts/TripContext.tsx[m
[1m+++ b/src/contexts/TripContext.tsx[m
[36m@@ -1,6 +1,5 @@[m
[31m-import React, { createContext, useContext, useState, useEffect, useCallback, useMemo } from 'react';[m
[32m+[m[32mimport React, { createContext, useState, useEffect, useCallback, useMemo } from 'react';[m
 import useLocalStorage from '../hooks/useLocalStorage';[m
[31m-import useAsync from '../hooks/useAsync';[m
 import useDebounce from '../hooks/useDebounce';[m
 [m
 export interface Destination {[m
[36m@@ -26,6 +25,7 @@[m [mexport interface Trip {[m
   travelers: { adults: number; children: number; };[m
   budget: { total: number; spent: number; currency: string; };[m
   status: 'planning' | 'confirmed' | 'completed' | 'cancelled';[m
[32m+[m[32m  activities: any[];[m
   createdAt: string;[m
   updatedAt: string;[m
 }[m
[36m@@ -66,133 +66,78 @@[m [mconst initialSearchFilters: SearchFilters = {[m
   travelers: { adults: 2, children: 0 }[m
 };[m
 [m
[31m-// DATOS EST√ÅTICOS FUERA DEL COMPONENTE[m
 const MOCK_DESTINATIONS: Destination[] = [[m
   {[m
[31m-    id: 'madrid', name: 'Madrid', country: 'Espa√±a',[m
[32m+[m[32m    id: 'madrid', name: 'Madrid', country: 'EspaÒa',[m
     description: 'Capital vibrante con rica historia.',[m
     averagePrice: 85, currency: 'EUR', popularityScore: 9.2,[m
     weatherInfo: { averageTemp: 18, bestMonths: ['Mayo', 'Junio'], climate: 'Continental' }[m
   },[m
   {[m
[31m-    id: 'barcelona', name: 'Barcelona', country: 'Espa√±a',[m
[31m-    description: 'Ciudad cosmopolita con arquitectura √∫nica.',[m
[32m+[m[32m    id: 'barcelona', name: 'Barcelona', country: 'EspaÒa',[m
[32m+[m[32m    description: 'Ciudad cosmopolita con arquitectura ˙nica.',[m
     averagePrice: 92, currency: 'EUR', popularityScore: 9.5,[m
[31m-    weatherInfo: { averageTemp: 20, bestMonths: ['Abril', 'Mayo'], climate: 'Mediterr√°neo' }[m
[32m+[m[32m    weatherInfo: { averageTemp: 20, bestMonths: ['Abril', 'Mayo'], climate: 'Mediterr·neo' }[m
   },[m
   {[m
[31m-    id: 'paris', name: 'Par√≠s', country: 'Francia',[m
[31m-    description: 'Ciudad del amor con monumentos ic√≥nicos.',[m
[32m+[m[32m    id: 'paris', name: 'ParÌs', country: 'Francia',[m
[32m+[m[32m    description: 'Ciudad del amor con monumentos icÛnicos.',[m
     averagePrice: 125, currency: 'EUR', popularityScore: 9.8,[m
[31m-    weatherInfo: { averageTemp: 16, bestMonths: ['Mayo', 'Junio'], climate: 'Oce√°nico' }[m
[32m+[m[32m    weatherInfo: { averageTemp: 16, bestMonths: ['Mayo', 'Junio'], climate: 'Oce·nico' }[m
   },[m
   {[m
     id: 'rome', name: 'Roma', country: 'Italia',[m
     description: 'Ciudad eterna con historia milenaria.',[m
     averagePrice: 95, currency: 'EUR', popularityScore: 9.4,[m
[31m-    weatherInfo: { averageTemp: 19, bestMonths: ['Abril', 'Mayo'], climate: 'Mediterr√°neo' }[m
[32m+[m[32m    weatherInfo: { averageTemp: 19, bestMonths: ['Abril', 'Mayo'], climate: 'Mediterr·neo' }[m
   },[m
   {[m
     id: 'london', name: 'Londres', country: 'Reino Unido',[m
[31m-    description: 'Metr√≥poli multicultural con tradici√≥n.',[m
[32m+[m[32m    description: 'MetrÛpoli multicultural con tradiciÛn.',[m
     averagePrice: 140, currency: 'EUR', popularityScore: 9.1,[m
[31m-    weatherInfo: { averageTemp: 12, bestMonths: ['Junio', 'Julio'], climate: 'Oce√°nico' }[m
[32m+[m[32m    weatherInfo: { averageTemp: 12, bestMonths: ['Junio', 'Julio'], climate: 'Oce·nico' }[m
   }[m
 ];[m
 [m
[31m-const TripContext = createContext<TripContextType | null>(null);[m
[32m+[m[32mexport const TripContext = createContext<TripContextType | null>(null);[m
 [m
[31m-export const TripProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {[m
[32m+[m[32mconst TripProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {[m
   const [searchQuery, setSearchQuery] = useState('');[m
   const [searchResults, setSearchResults] = useState<Destination[]>([]);[m
   const [isSearching, setIsSearching] = useState(false);[m
[31m-  const [currentTrip, setCurrentTrip] = useState<Trip | null>(null);[m
   const [error, setError] = useState<string | null>(null);[m
   const [searchFilters, setSearchFilters] = useState<SearchFilters>(initialSearchFilters);[m
   [m
   const [trips, setTrips] = useLocalStorage<Trip[]>('tripwase_trips', []);[m
   const [favorites, setFavorites] = useLocalStorage<Destination[]>('tripwase_favorites', []);[m
   const [searchHistory, setSearchHistory] = useLocalStorage<string[]>('tripwase_search_history', []);[m
[32m+[m[32m  const [currentTrip, setCurrentTrip] = useLocalStorage<Trip | null>('tripwase_current_trip', null);[m
   [m
[31m-  const debouncedQuery = useDebounce(searchQuery, 500);[m
[32m+[m[32m  const debouncedQuery = useDebounce(searchQuery, 300);[m
 [m
[31m-  // API FUNCTION FUERA DEL COMPONENTE - NO SE RE-CREA[m
[31m-  const searchDestinationsApi = useMemo(() => {[m
[31m-    return async (query: string): Promise<Destination[]> => {[m
[31m-      await new Promise(resolve => setTimeout(resolve, 800));[m
[31m-      [m
[31m-      if (!query || query.trim().length === 0) return [];[m
[31m-      [m
[31m-      return MOCK_DESTINATIONS.filter(d => [m
[31m-        d.name.toLowerCase().includes(query.toLowerCase()) ||[m
[31m-        d.country.toLowerCase().includes(query.toLowerCase()) ||[m
[31m-        d.description.toLowerCase().includes(query.toLowerCase())[m
[31m-      );[m
[31m-    };[m
[31m-  }, []); // Sin dependencias - funci√≥n estable[m
[31m-[m
[31m-  const searchAsync = useAsync(searchDestinationsApi);[m
[31m-[m
[31m-  // USEEFFECT SIMPLIFICADO - SIN DEPENDENCIAS PROBLEM√ÅTICAS[m
[31m-  useEffect(() => {[m
[31m-    let isCancelled = false;[m
[31m-[m
[31m-    if (debouncedQuery && debouncedQuery.trim().length > 0) {[m
[31m-      setIsSearching(true);[m
[31m-      setError(null);[m
[31m-      [m
[31m-      // EJECUTAR B√öSQUEDA[m
[31m-      searchDestinationsApi(debouncedQuery)[m
[31m-        .then(results => {[m
[31m-          if (!isCancelled) {[m
[31m-            setSearchResults(results);[m
[31m-            [m
[31m-            // ACTUALIZAR HISTORIAL DE FORMA SEGURA[m
[31m-            setSearchHistory(prev => {[m
[31m-              const filtered = prev.filter(h => h !== debouncedQuery);[m
[31m-              return [debouncedQuery, ...filtered].slice(0, 10);[m
[31m-            });[m
[31m-          }[m
[31m-        })[m
[31m-        .catch(err => {[m
[31m-          if (!isCancelled) {[m
[31m-            console.error('Error en b√∫squeda:', err);[m
[31m-            setError(err.message || 'Error en b√∫squeda');[m
[31m-            setSearchResults([]);[m
[31m-          }[m
[31m-        })[m
[31m-        .finally(() => {[m
[31m-          if (!isCancelled) {[m
[31m-            setIsSearching(false);[m
[31m-          }[m
[31m-        });[m
[31m-    } else {[m
[31m-      setSearchResults([]);[m
[31m-      setIsSearching(false);[m
[31m-